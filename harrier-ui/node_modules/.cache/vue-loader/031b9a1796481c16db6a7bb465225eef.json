{"remainingRequest":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\authority\\role\\Form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\authority\\role\\Form.vue","mtime":1681468306530},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nexport default {\r\n  props: {\r\n    transData: {\r\n      type: Object,\r\n      default: function () {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  data: function () {\r\n    return {\r\n      formBean: {},\r\n      loading: false,\r\n      formRule: {\r\n\t        \troleName: [\r\n\t\t          { required: true, message: '请输入角色名称！' }\r\n\t\t        ]\r\n\t\t        // role_code: [\r\n\t\t        //   { required: true, message: '请输入角色编码！' }\r\n\t\t        // ]\r\n\t\t   }\r\n    }\r\n  },\r\n  methods: {\r\n    init: function () {\r\n      let id = this.transData.id\r\n      if (id) {\r\n        let reqConfig = {\r\n          method: 'GET',\r\n          url: `/role/${id}`\r\n        }\r\n        this.$ajax(reqConfig)\r\n          .then(resp => {\r\n    \t\t\t  this.formBean = resp.data\r\n            this.formBean.roleName = this.formBean.roleName.replace('ROLE_', '')\r\n      \t\t\t})\r\n      }\r\n    },\r\n    save: function () {\r\n      this.$refs.roleForm.validate(valid => {\r\n        if (!valid) return\r\n        let reqConfig = {}\r\n        let data = Object.assign({}, this.formBean)\r\n        reqConfig.data = data\r\n        delete reqConfig.data.createTime\r\n        delete reqConfig.data.updateTime\r\n        if (this.formBean.roleId) {\r\n          reqConfig.method = 'PUT'\r\n          reqConfig.url = `/role/${data.roleId}/update`\r\n        } else {\r\n          if (reqConfig.data.roleName) {\r\n            // reqConfig.data.createUser = 'test'\r\n            // reqConfig.data.updateUser = 'test'\r\n            reqConfig.data.isEnable = true\r\n          }\r\n          reqConfig.method = 'POST'\r\n          reqConfig.url = '/role/addRole'\r\n        }\r\n        // let roleCode = 'ROLE_'.concat(data.role_code)\r\n        // reqConfig.data.role_code = roleCode\r\n        this.loading = true\r\n        this.$ajax(reqConfig)\r\n          .then(resp => {\r\n      \t\t\t\tthis.cancel()\r\n      \t\t\t})\r\n\t     \t})\r\n    },\r\n    cancel: function () {\r\n      let queryCache = { searchBean: this.transData.searchBean, currentPage: this.transData.currentPage, pageSize: this.transData.pageSize }\r\n      this.$emit('exit', Object.assign({}, queryCache))\r\n    }\r\n  },\r\n  mounted: function () {\r\n \t\tthis.init()\r\n  }\r\n}\r\n",{"version":3,"sources":["Form.vue"],"names":[],"mappings":";AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Form.vue","sourceRoot":"src/view/spdb/authority/role","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<div class=\"spdb-form\">\r\n\t\t\t<Form ref=\"roleForm\" :label-width=\"100\" :model=\"formBean\" :rules=\"formRule\">\r\n\t\t\t\t<Row>\r\n\t\t\t\t<Col span=\"14\">\r\n\t\t\t\t\t<FormItem prop=\"roleName\" label=\"角色名称\">\r\n\t\t\t\t\t\t<Input v-model=\"formBean.roleName\"/>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t\t </Row>\r\n\t\t\t\t<Row>\r\n\t\t\t\t<Col span=\"14\">\r\n\t\t\t\t<FormItem prop=\"role_code\" label=\"角色编码\">\r\n\t\t\t\t\t<Input v-model=\"formBean.roleName\">\r\n\t\t\t\t\t\t<span slot=\"prepend\">ROLE_</span>\r\n\t\t\t\t\t</Input>\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t\t </Row>\r\n\t\t\t\t<Row>\r\n\t\t\t\t<Col span=\"14\">\r\n\t\t\t\t<FormItem prop=\"remark\" label=\"描述\">\r\n\t\t\t\t\t<Input v-model=\"formBean.remark\" type=\"textarea\" :rows=\"3\"/>\r\n\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t\t<div class=\"spdb-toolbar\">\r\n\t\t\t<Button type=\"primary\" :loading=\"loading\" icon=\"md-add\" @click=\"save()\">保存</Button>\r\n\t\t\t<Button type=\"primary\" icon=\"ios-redo-outline\" @click=\"cancel()\">取消</Button>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    transData: {\r\n      type: Object,\r\n      default: function () {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  data: function () {\r\n    return {\r\n      formBean: {},\r\n      loading: false,\r\n      formRule: {\r\n\t        \troleName: [\r\n\t\t          { required: true, message: '请输入角色名称！' }\r\n\t\t        ]\r\n\t\t        // role_code: [\r\n\t\t        //   { required: true, message: '请输入角色编码！' }\r\n\t\t        // ]\r\n\t\t   }\r\n    }\r\n  },\r\n  methods: {\r\n    init: function () {\r\n      let id = this.transData.id\r\n      if (id) {\r\n        let reqConfig = {\r\n          method: 'GET',\r\n          url: `/role/${id}`\r\n        }\r\n        this.$ajax(reqConfig)\r\n          .then(resp => {\r\n    \t\t\t  this.formBean = resp.data\r\n            this.formBean.roleName = this.formBean.roleName.replace('ROLE_', '')\r\n      \t\t\t})\r\n      }\r\n    },\r\n    save: function () {\r\n      this.$refs.roleForm.validate(valid => {\r\n        if (!valid) return\r\n        let reqConfig = {}\r\n        let data = Object.assign({}, this.formBean)\r\n        reqConfig.data = data\r\n        delete reqConfig.data.createTime\r\n        delete reqConfig.data.updateTime\r\n        if (this.formBean.roleId) {\r\n          reqConfig.method = 'PUT'\r\n          reqConfig.url = `/role/${data.roleId}/update`\r\n        } else {\r\n          if (reqConfig.data.roleName) {\r\n            // reqConfig.data.createUser = 'test'\r\n            // reqConfig.data.updateUser = 'test'\r\n            reqConfig.data.isEnable = true\r\n          }\r\n          reqConfig.method = 'POST'\r\n          reqConfig.url = '/role/addRole'\r\n        }\r\n        // let roleCode = 'ROLE_'.concat(data.role_code)\r\n        // reqConfig.data.role_code = roleCode\r\n        this.loading = true\r\n        this.$ajax(reqConfig)\r\n          .then(resp => {\r\n      \t\t\t\tthis.cancel()\r\n      \t\t\t})\r\n\t     \t})\r\n    },\r\n    cancel: function () {\r\n      let queryCache = { searchBean: this.transData.searchBean, currentPage: this.transData.currentPage, pageSize: this.transData.pageSize }\r\n      this.$emit('exit', Object.assign({}, queryCache))\r\n    }\r\n  },\r\n  mounted: function () {\r\n \t\tthis.init()\r\n  }\r\n}\r\n</script>\r\n"]}]}