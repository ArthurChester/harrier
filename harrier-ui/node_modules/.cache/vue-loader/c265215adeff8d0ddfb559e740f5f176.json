{"remainingRequest":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\components\\main\\main.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\components\\main\\main.vue","mtime":1681468306469},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport SideMenu from './components/side-menu'\r\nimport siderTrigger from './components/header-bar/sider-trigger'\r\nimport HeaderBar from './components/header-bar'\r\nimport TagsNav from './components/tags-nav'\r\nimport User from './components/user'\r\nimport Help from './components/help'\r\nimport ABackTop from './components/a-back-top'\r\nimport Fullscreen from './components/fullscreen'\r\nimport Language from './components/language'\r\nimport ErrorStore from './components/error-store'\r\nimport { mapMutations, mapActions, mapGetters } from 'vuex'\r\nimport { getNewTagList, routeEqual } from '@/libs/util'\r\nimport routers from '@/router/routers'\r\nimport minLogo from '@/assets/images/logoSmall.png'\r\nimport maxLogo from '@/assets/images/logoBig.png'\r\nimport './main.less'\r\nexport default {\r\n  name: 'Main',\r\n  components: {\r\n    siderTrigger,\r\n    SideMenu,\r\n    HeaderBar,\r\n    Language,\r\n    TagsNav,\r\n    Fullscreen,\r\n    ErrorStore,\r\n    User,\r\n    Help,\r\n    ABackTop\r\n  },\r\n  data () {\r\n    return {\r\n      homeTitle: 'Harrier',\r\n      collapsed: false,\r\n      minLogo,\r\n      maxLogo,\r\n      isFullscreen: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'errorCount'\r\n    ]),\r\n    tagNavList () {\r\n      return this.$store.state.app.tagNavList\r\n    },\r\n    tagRouter () {\r\n      return this.$store.state.app.tagRouter\r\n    },\r\n    userAvatar () {\r\n      return this.$store.state.user.avatarImgPath\r\n    },\r\n    cacheList () {\r\n      const list = ['ParentView', ...this.tagNavList.length ? this.tagNavList.filter(item => !(item.meta && item.meta.notCache)).map(item => item.name) : []]\r\n      return list\r\n    },\r\n    menuList () {\r\n      return this.$store.getters.menuList\r\n    },\r\n    local () {\r\n      return this.$store.state.app.local\r\n    },\r\n    hasReadErrorPage () {\r\n      return this.$store.state.app.hasReadErrorPage\r\n    },\r\n    unreadCount () {\r\n      return this.$store.state.user.unreadCount\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations([\r\n      'setBreadCrumb',\r\n      'setTagNavList',\r\n      'addTag',\r\n      'setLocal',\r\n      'setHomeRoute',\r\n      'closeTag'\r\n    ]),\r\n    ...mapActions([\r\n      'handleLogin',\r\n      'getUnreadMessageCount'\r\n    ]),\r\n    turnToPage (route) {\r\n      let { name, params, query } = {}\r\n      if (typeof route === 'string') name = route\r\n      else {\r\n        name = route.name\r\n        params = route.params\r\n        query = route.query\r\n      }\r\n      if (name.indexOf('isTurnByHref_') > -1) {\r\n        window.open(name.split('_')[1])\r\n        return\r\n      }\r\n      this.$router.push({\r\n        name,\r\n        params,\r\n        query\r\n      })\r\n    },\r\n    handleCollapsedChange (state) {\r\n      this.collapsed = state\r\n    },\r\n    handleCloseTag (res, type, route) {\r\n      if (type !== 'others') {\r\n        if (type === 'all') {\r\n          this.turnToPage(this.$config.homeName)\r\n        } else {\r\n          if (routeEqual(this.$route, route)) {\r\n            this.closeTag(route)\r\n          }\r\n        }\r\n      }\r\n      this.setTagNavList(res)\r\n    },\r\n    handleClick (item) {\r\n      this.turnToPage(item)\r\n    }\r\n  },\r\n  watch: {\r\n    '$route' (newRoute) {\r\n      const { name, query, params, meta } = newRoute\r\n      this.addTag({\r\n        route: { name, query, params, meta },\r\n        type: 'push'\r\n      })\r\n      this.setBreadCrumb(newRoute)\r\n      this.setTagNavList(getNewTagList(this.tagNavList, newRoute))\r\n      this.$refs.sideMenu.updateOpenName(newRoute.name)\r\n    }\r\n  },\r\n  mounted () {\r\n    /**\r\n     * @description 初始化设置面包屑导航和标签导航\r\n     */\r\n    this.setTagNavList()\r\n    // this.setHomeRoute(this.$store.getters.menues)\r\n    this.setHomeRoute(routers)\r\n    const { name, params, query, meta } = this.$route\r\n    this.addTag({\r\n      route: { name, params, query, meta }\r\n    })\r\n    this.setBreadCrumb(this.$route)\r\n    // 设置初始语言\r\n    this.setLocal(this.$i18n.locale)\r\n    // 如果当前打开页面不在标签栏中，跳到homeName页\r\n    if (!this.tagNavList.find(item => item.name === this.$route.name)) {\r\n      this.$router.push({\r\n        name: this.$config.homeName\r\n      })\r\n    }\r\n    // 获取未读消息条数\r\n    this.getUnreadMessageCount()\r\n  }\r\n}\r\n",{"version":3,"sources":["main.vue"],"names":[],"mappings":";AAoFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.vue","sourceRoot":"src/components/main","sourcesContent":["<template>\r\n  <Layout style=\"height: 100%\" class=\"main\">\r\n    <Header class=\"header-con\"  >\r\n      <!-- 大数据中心实时数据仓库批量监控系统 -->\r\n      <!-- <div class=\"sys-bar-logo\">\r\n        <Row class=\"sys-bar-logo-row\" style=\"width:200px\">\r\n          <Col span=\"14\" class=\"sys-bar-logo-row\" style=\"width:70px\">\r\n            <img src=\"../../../static/img/logobg-white.png\" />\r\n          </Col>\r\n          <!-- <Col span=\"8\">\r\n            <Row >\r\n              <div class=\"logoTitle_m1\">浦发银行</div>\r\n              <div class=\"logoTitle_m2\">SPD BANK</div>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </div> -->\r\n      <!--\r\n      <div class=\"sys-bar-logoline\"  style=\"width:20px\">\r\n          <img src=\"../../../static/img/logoline.png\" />\r\n        </div>-->\r\n      <div class=\"sys-bar-title\" >\r\n        <span>{{ homeTitle }}</span>\r\n      </div>\r\n\r\n      <header-bar :collapsed=\"collapsed\" @on-coll-change=\"handleCollapsedChange\">\r\n        <!-- <user :message-unread-count=\"unreadCount\" :user-avatar=\"minLogo\"/> -->\r\n        <user :message-unread-count=\"unreadCount\" :user-avatar=\"userAvatar\"/>\r\n        <help style=\"margin-right:4%\"/>\r\n        &nbsp;&nbsp;\r\n        <fullscreen v-model=\"isFullscreen\" style=\"margin-right: 20px;\"/>\r\n      </header-bar>\r\n\r\n    </Header>\r\n    <Layout>\r\n      <Sider hide-trigger collapsible :width=\"220\" :collapsed-width=\"64\" v-model=\"collapsed\" class=\"left-sider\" :style=\"{overflow: 'hidden'}\">\r\n        <side-menu\r\n          accordion ref=\"sideMenu\"\r\n          :active-name=\"$route.name\"\r\n          :collapsed=\"collapsed\"\r\n          @on-select=\"turnToPage\"\r\n          :menu-list=\"menuList\">\r\n          <!-- 需要放在菜单上面的内容，如Logo，写在side-menu标签内部，如下 -->\r\n         <!--\r\n          <div class=\"logo-con\">\r\n            <img style=\"width:100%;height:100%\" v-show=\"!collapsed\" :src=\"maxLogo\" key=\"max-logo\" />\r\n            <img style=\"width:65%;height:75%\" v-show=\"collapsed\" :src=\"minLogo\" key=\"min-logo\" />\r\n          </div> -->\r\n\r\n        </side-menu>\r\n      </Sider>\r\n      <Content class=\"main-content-con\">\r\n        <Layout class=\"main-layout-con\">\r\n         <Row type=\"flex\" justify=\"center\" >\r\n            <!-- <Col style=\"float:left;width:3%;z-index:20;background-color:#fff\">\r\n              <div style=\"padding:3px 0 0 6px\">\r\n              <sider-trigger :collapsed=\"collapsed\" icon=\"md-menu\" @on-change=\"handleCollapsedChange\"></sider-trigger>\r\n              </div>\r\n            </Col> -->\r\n            <Col style=\"width:97%\">\r\n              <div class=\"tag-nav-wrapper\">\r\n                <tags-nav :value=\"$route\" @input=\"handleClick\" :list=\"tagNavList\" @on-close=\"handleCloseTag\"/>\r\n              </div>\r\n              </Col>\r\n          </Row>\r\n          <!--\r\n          <div class=\"tag-nav-wrapper\">\r\n            <tags-nav :value=\"$route\" @input=\"handleClick\" :list=\"tagNavList\" @on-close=\"handleCloseTag\"/>\r\n          </div>-->\r\n          <Content class=\"content-wrapper\">\r\n            <keep-alive :include=\"cacheList\">\r\n              <router-view/>\r\n            </keep-alive>\r\n            <ABackTop :height=\"100\" :bottom=\"80\" :right=\"50\" container=\".content-wrapper\"></ABackTop>\r\n          </Content>\r\n          <Footer id=\"main-footer\" >\r\n            <h5>2019-2021&copy;{{ homeTitle }}</h5>\r\n          </Footer>\r\n        </Layout>\r\n      </Content>\r\n    </Layout>\r\n  </Layout>\r\n</template>\r\n<script>\r\nimport SideMenu from './components/side-menu'\r\nimport siderTrigger from './components/header-bar/sider-trigger'\r\nimport HeaderBar from './components/header-bar'\r\nimport TagsNav from './components/tags-nav'\r\nimport User from './components/user'\r\nimport Help from './components/help'\r\nimport ABackTop from './components/a-back-top'\r\nimport Fullscreen from './components/fullscreen'\r\nimport Language from './components/language'\r\nimport ErrorStore from './components/error-store'\r\nimport { mapMutations, mapActions, mapGetters } from 'vuex'\r\nimport { getNewTagList, routeEqual } from '@/libs/util'\r\nimport routers from '@/router/routers'\r\nimport minLogo from '@/assets/images/logoSmall.png'\r\nimport maxLogo from '@/assets/images/logoBig.png'\r\nimport './main.less'\r\nexport default {\r\n  name: 'Main',\r\n  components: {\r\n    siderTrigger,\r\n    SideMenu,\r\n    HeaderBar,\r\n    Language,\r\n    TagsNav,\r\n    Fullscreen,\r\n    ErrorStore,\r\n    User,\r\n    Help,\r\n    ABackTop\r\n  },\r\n  data () {\r\n    return {\r\n      homeTitle: 'Harrier',\r\n      collapsed: false,\r\n      minLogo,\r\n      maxLogo,\r\n      isFullscreen: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'errorCount'\r\n    ]),\r\n    tagNavList () {\r\n      return this.$store.state.app.tagNavList\r\n    },\r\n    tagRouter () {\r\n      return this.$store.state.app.tagRouter\r\n    },\r\n    userAvatar () {\r\n      return this.$store.state.user.avatarImgPath\r\n    },\r\n    cacheList () {\r\n      const list = ['ParentView', ...this.tagNavList.length ? this.tagNavList.filter(item => !(item.meta && item.meta.notCache)).map(item => item.name) : []]\r\n      return list\r\n    },\r\n    menuList () {\r\n      return this.$store.getters.menuList\r\n    },\r\n    local () {\r\n      return this.$store.state.app.local\r\n    },\r\n    hasReadErrorPage () {\r\n      return this.$store.state.app.hasReadErrorPage\r\n    },\r\n    unreadCount () {\r\n      return this.$store.state.user.unreadCount\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations([\r\n      'setBreadCrumb',\r\n      'setTagNavList',\r\n      'addTag',\r\n      'setLocal',\r\n      'setHomeRoute',\r\n      'closeTag'\r\n    ]),\r\n    ...mapActions([\r\n      'handleLogin',\r\n      'getUnreadMessageCount'\r\n    ]),\r\n    turnToPage (route) {\r\n      let { name, params, query } = {}\r\n      if (typeof route === 'string') name = route\r\n      else {\r\n        name = route.name\r\n        params = route.params\r\n        query = route.query\r\n      }\r\n      if (name.indexOf('isTurnByHref_') > -1) {\r\n        window.open(name.split('_')[1])\r\n        return\r\n      }\r\n      this.$router.push({\r\n        name,\r\n        params,\r\n        query\r\n      })\r\n    },\r\n    handleCollapsedChange (state) {\r\n      this.collapsed = state\r\n    },\r\n    handleCloseTag (res, type, route) {\r\n      if (type !== 'others') {\r\n        if (type === 'all') {\r\n          this.turnToPage(this.$config.homeName)\r\n        } else {\r\n          if (routeEqual(this.$route, route)) {\r\n            this.closeTag(route)\r\n          }\r\n        }\r\n      }\r\n      this.setTagNavList(res)\r\n    },\r\n    handleClick (item) {\r\n      this.turnToPage(item)\r\n    }\r\n  },\r\n  watch: {\r\n    '$route' (newRoute) {\r\n      const { name, query, params, meta } = newRoute\r\n      this.addTag({\r\n        route: { name, query, params, meta },\r\n        type: 'push'\r\n      })\r\n      this.setBreadCrumb(newRoute)\r\n      this.setTagNavList(getNewTagList(this.tagNavList, newRoute))\r\n      this.$refs.sideMenu.updateOpenName(newRoute.name)\r\n    }\r\n  },\r\n  mounted () {\r\n    /**\r\n     * @description 初始化设置面包屑导航和标签导航\r\n     */\r\n    this.setTagNavList()\r\n    // this.setHomeRoute(this.$store.getters.menues)\r\n    this.setHomeRoute(routers)\r\n    const { name, params, query, meta } = this.$route\r\n    this.addTag({\r\n      route: { name, params, query, meta }\r\n    })\r\n    this.setBreadCrumb(this.$route)\r\n    // 设置初始语言\r\n    this.setLocal(this.$i18n.locale)\r\n    // 如果当前打开页面不在标签栏中，跳到homeName页\r\n    if (!this.tagNavList.find(item => item.name === this.$route.name)) {\r\n      this.$router.push({\r\n        name: this.$config.homeName\r\n      })\r\n    }\r\n    // 获取未读消息条数\r\n    this.getUnreadMessageCount()\r\n  }\r\n}\r\n</script>\r\n"]}]}