{"remainingRequest":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\job\\jobList\\Jobdetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\job\\jobList\\Jobdetail.vue","mtime":1681468306537},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nconst RESOURCE_PATH = '/udsJob'\r\n\r\nexport default {\r\n  props: {\r\n    transData: {\r\n      type: Object,\r\n      default: function () {\r\n                return {}\r\n      }\r\n    }\r\n      },\r\n  data () {\r\n    return {\r\n      formBean: {},\r\n      locationList: [],\r\n      formRule: {\r\n\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 初始化\r\n     **/\r\n    init () {\r\n      if (this.transData.id) { // 如果传过来的存在ID则说明是编辑功能跳转过来\r\n        let params = {}\r\n        params.platform = this.transData.jobData.platform\r\n        params.systems = this.transData.jobData.systems\r\n        params.job = this.transData.jobData.job\r\n        let loadConfig = {\r\n          method: 'GET',\r\n          url: RESOURCE_PATH + '/selectJobDetail', // + this.transData.id\r\n          params: params\r\n        }\r\n        this.$ajax(loadConfig)\r\n          .then(resp => {\r\n            if (resp.status && resp.status === 200) {\r\n              let data = resp.data.rows\r\n              data.isEnable == 0 ? data.isEnable = '禁用' : data.isEnable = '启用'\r\n              data.virtualEnable == 0 ? data.virtualEnable = '否' : data.virtualEnable = '是'\r\n              data.checkFrequency == 0 ? data.checkFrequency = '否' : data.checkFrequency = '是'\r\n              data.checkTimeTrigger == 0 ? data.checkTimeTrigger = '否' : data.checkTimeTrigger = '是'\r\n              data.lastStatus == 'Running' ? data.endTime = '' : data.endTime = data.endTime\r\n              this.formBean = data\r\n            }\r\n          })\r\n      } else {\r\n        this.bindData()\r\n      }\r\n    //   this.querylocationList()\r\n    },\r\n    /**\r\n         * 如果传过来的有初始数据则进行数据绑定\r\n         **/\r\n    bindData () {\r\n      try {\r\n        this.formBean = Object.assign({}, this.transData.initFormBean)\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    /**\r\n         * 保存表单\r\n         **/\r\n    save () {\r\n      this.$refs.udsjobForm.validate(valid => {\r\n        if (!valid) return\r\n        let params = {}\r\n        Object.assign(params, this.formBean)\r\n        let httpConfig = {\r\n          url: RESOURCE_PATH,\r\n          data: params\r\n        }\r\n        if (this.transData.id) {\r\n          httpConfig.method = 'PUT'\r\n          httpConfig.url = RESOURCE_PATH + '/' + this.transData.id\r\n        } else {\r\n          httpConfig.method = 'POST'\r\n        }\r\n        this.$ajax(httpConfig)\r\n          .then(resp => {\r\n            this.cancel()\r\n          })\r\n      })\r\n    },\r\n    /**\r\n       * 返回到数据视图\r\n      **/\r\n    cancel () {\r\n      let prevTab = ''\r\n      if (this.transData.prevTab) {\r\n        prevTab = this.transData.prevTab\r\n      } else if (this.transData.tabObj) {\r\n        prevTab = this.transData.tabObj.prevTab\r\n      }\r\n      let queryCache = { formBean: this.transData.formBean, currentPage: this.transData.currentPage, pageSize: this.transData.pageSize }\r\n      let backParam = { id: this.transData.previd, statusName: 'table', prevTab: prevTab, type: 'back', curTab: 'jobdetail' }\r\n      if (this.transData.jobStatus) {\r\n        queryCache.jobStatus = this.transData.jobStatus\r\n      }\r\n      if (this.transData.tablePage) {\r\n        queryCache.tablePage = this.transData.tablePage\r\n          }\r\n      if (this.transData.jobData) {\r\n        this.$emit('switch', Object.assign({}, queryCache, backParam, { prequeryCache: this.transData }, { jobData: this.transData.jobData }))\r\n      } else {\r\n        this.$emit('switch', Object.assign({}, queryCache, backParam))\r\n      }\r\n    },\r\n    querylocationList () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/dictionary',\r\n        params: { dicCode: 'location' }\r\n      }\r\n      this.$ajax(loadConfig)\r\n        .then(resp => {\r\n          this.locationList = []\r\n          resp.data.rows.forEach(data => {\r\n            let tmp = {}\r\n            tmp.value = parseInt(data.dicValue)\r\n            tmp.label = data.dicName\r\n            this.locationList.push(tmp)\r\n          })\r\n        })\r\n    }\r\n  },\r\n  /**\r\n     * 视图挂载\r\n     **/\r\n  mounted () {\r\n    this.init()\r\n  }\r\n}\r\n\r\n",{"version":3,"sources":["Jobdetail.vue"],"names":[],"mappings":";AAsKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Jobdetail.vue","sourceRoot":"src/view/spdb/job/jobList","sourcesContent":["/* eslint-disable no-tabs */\r\n<template>\r\n    <div>\r\n        <div>\r\n            <!-- <Button type=\"primary\" icon=\"md-add\" @click=\"save\">保存</Button> -->\r\n            <Row>\r\n                <Col span=\"20\">\r\n                    <div style=\"font-size:14px;font-weight: bold; color: #464c5b;margin-left:50px;\">作业详细信息</div>\r\n                </Col>\r\n                <Col span=\"4\">\r\n                    <Button size=\"small\" type=\"primary\" icon=\"ios-arrow-back\" @click=\"cancel\" style=\"\">返回</Button>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n        <Form ref=\"udsjobForm\" :model=\"formBean\" :label-width=\"220\" >\r\n            <Row>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"platform\" label=\"平台名\">\r\n                        <Input readonly v-model=\"formBean.platform\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"systems\" label=\"应用名\">\r\n                        <Input readonly v-model=\"formBean.systems\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                </Row>\r\n                <Row>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"job\" label=\"作业名\">\r\n                        <Input readonly type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 5}\"  v-model=\"formBean.job\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"jobName\" label=\"作业中文名\">\r\n                        <Input readonly type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 5}\"  v-model=\"formBean.jobName\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                </Row>\r\n                <Row>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"serverName\" label=\"执行节点\">\r\n                        <Input readonly v-model=\"formBean.serverName\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"jobType\" label=\"作业类型\">\r\n                        <Input readonly v-model=\"formBean.jobType\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col span=\"8\">\r\n                        <FormItem prop=\"jobDate\" label=\"最后执行作业日期\">\r\n                            <DatePicker :transfer=\"true\" readonly type=\"date\" parse=\"yyyyMMdd\" format=\"yyyyMMdd\" v-model=\"formBean.jobDate\"></DatePicker>\r\n                        </FormItem>\r\n                    </Col>\r\n                    <Col span=\"8\">\r\n                        <FormItem prop=\"lastStatus\" label=\"作业最后执行状态\">\r\n                            <Input readonly v-model=\"formBean.lastStatus\"/>\r\n                        </FormItem>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"pendingTime\" label=\"进入pending状态的时间\">\r\n                        <Input readonly v-model=\"formBean.pendingTime\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"dispatcherTime\" label=\"进入dispatcherTime状态的时间\">\r\n                        <Input readonly v-model=\"formBean.dispatcherTime\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                </Row>\r\n                <Row>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"startTime\" label=\"开始执行时间\">\r\n                        <Input readonly v-model=\"formBean.startTime\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"endTime\" label=\"结束时间\">\r\n                        <Input readonly v-model=\"formBean.endTime\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                </Row>\r\n                <Row>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"multiBatch\" label=\"批次号\">\r\n                        <Input readonly v-model=\"formBean.multiBatch\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"numTimes\" label=\"执行次数\">\r\n                        <Input readonly v-model=\"formBean.numTimes\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                </Row>\r\n                <Row>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"priority\" label=\"作业执行优先级 \">\r\n                        <Input readonly v-model=\"formBean.priority\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"timeWindow\" label=\"窗口执行时间\">\r\n                        <Input readonly v-model=\"formBean.timeWindow\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                </Row>\r\n                <Row>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"checkFrequency\" label=\"是否检测时间\">\r\n                        <Input readonly v-model=\"formBean.checkFrequency\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"checkTimeTrigger\" label=\"检测是否采用时间触发\">\r\n                        <Input readonly v-model=\"formBean.checkTimeTrigger\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                </Row>\r\n                <Row>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"isEnable\" label=\"是否启用\">\r\n                        <Input readonly v-model=\"formBean.isEnable\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"callAgainMaxNum\" label=\"最大重调次数\">\r\n                        <Input readonly v-model=\"formBean.callAgainMaxNum\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                </Row>\r\n                <Row>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"callAgainNum\" label=\"当前重调次数\">\r\n                        <Input readonly v-model=\"formBean.callAgainNum\"/>\r\n                    </FormItem>\r\n                </Col>\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"virtualEnable\" label=\"虚作业\">\r\n                        <Input readonly v-model=\"formBean.virtualEnable\"/>\r\n                    </FormItem>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <!-- <Col span=\"8\">\r\n                    <FormItem prop=\"lastScriptName\" label=\"最后执行脚本\">\r\n                        <Input readonly type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 5}\" v-model=\"formBean.lastScriptName\"/>\r\n                    </FormItem>\r\n                </Col> -->\r\n                <Col span=\"8\">\r\n                    <FormItem prop=\"dbControl\" label=\"逻辑集群\">\r\n                        <Select  v-model=\"formBean.dbControl\" :disabled=\"true\">\r\n                            <Option  v-for=\"item in locationList\" :value=\"item.value\" :key=\"item.value\" >{{ item.label }}</Option>\r\n                        </Select>\r\n                    </FormItem>\r\n                </Col>\r\n            </Row>\r\n        </Form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nconst RESOURCE_PATH = '/udsJob'\r\n\r\nexport default {\r\n  props: {\r\n    transData: {\r\n      type: Object,\r\n      default: function () {\r\n                return {}\r\n      }\r\n    }\r\n      },\r\n  data () {\r\n    return {\r\n      formBean: {},\r\n      locationList: [],\r\n      formRule: {\r\n\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 初始化\r\n     **/\r\n    init () {\r\n      if (this.transData.id) { // 如果传过来的存在ID则说明是编辑功能跳转过来\r\n        let params = {}\r\n        params.platform = this.transData.jobData.platform\r\n        params.systems = this.transData.jobData.systems\r\n        params.job = this.transData.jobData.job\r\n        let loadConfig = {\r\n          method: 'GET',\r\n          url: RESOURCE_PATH + '/selectJobDetail', // + this.transData.id\r\n          params: params\r\n        }\r\n        this.$ajax(loadConfig)\r\n          .then(resp => {\r\n            if (resp.status && resp.status === 200) {\r\n              let data = resp.data.rows\r\n              data.isEnable == 0 ? data.isEnable = '禁用' : data.isEnable = '启用'\r\n              data.virtualEnable == 0 ? data.virtualEnable = '否' : data.virtualEnable = '是'\r\n              data.checkFrequency == 0 ? data.checkFrequency = '否' : data.checkFrequency = '是'\r\n              data.checkTimeTrigger == 0 ? data.checkTimeTrigger = '否' : data.checkTimeTrigger = '是'\r\n              data.lastStatus == 'Running' ? data.endTime = '' : data.endTime = data.endTime\r\n              this.formBean = data\r\n            }\r\n          })\r\n      } else {\r\n        this.bindData()\r\n      }\r\n    //   this.querylocationList()\r\n    },\r\n    /**\r\n         * 如果传过来的有初始数据则进行数据绑定\r\n         **/\r\n    bindData () {\r\n      try {\r\n        this.formBean = Object.assign({}, this.transData.initFormBean)\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    /**\r\n         * 保存表单\r\n         **/\r\n    save () {\r\n      this.$refs.udsjobForm.validate(valid => {\r\n        if (!valid) return\r\n        let params = {}\r\n        Object.assign(params, this.formBean)\r\n        let httpConfig = {\r\n          url: RESOURCE_PATH,\r\n          data: params\r\n        }\r\n        if (this.transData.id) {\r\n          httpConfig.method = 'PUT'\r\n          httpConfig.url = RESOURCE_PATH + '/' + this.transData.id\r\n        } else {\r\n          httpConfig.method = 'POST'\r\n        }\r\n        this.$ajax(httpConfig)\r\n          .then(resp => {\r\n            this.cancel()\r\n          })\r\n      })\r\n    },\r\n    /**\r\n       * 返回到数据视图\r\n      **/\r\n    cancel () {\r\n      let prevTab = ''\r\n      if (this.transData.prevTab) {\r\n        prevTab = this.transData.prevTab\r\n      } else if (this.transData.tabObj) {\r\n        prevTab = this.transData.tabObj.prevTab\r\n      }\r\n      let queryCache = { formBean: this.transData.formBean, currentPage: this.transData.currentPage, pageSize: this.transData.pageSize }\r\n      let backParam = { id: this.transData.previd, statusName: 'table', prevTab: prevTab, type: 'back', curTab: 'jobdetail' }\r\n      if (this.transData.jobStatus) {\r\n        queryCache.jobStatus = this.transData.jobStatus\r\n      }\r\n      if (this.transData.tablePage) {\r\n        queryCache.tablePage = this.transData.tablePage\r\n          }\r\n      if (this.transData.jobData) {\r\n        this.$emit('switch', Object.assign({}, queryCache, backParam, { prequeryCache: this.transData }, { jobData: this.transData.jobData }))\r\n      } else {\r\n        this.$emit('switch', Object.assign({}, queryCache, backParam))\r\n      }\r\n    },\r\n    querylocationList () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/dictionary',\r\n        params: { dicCode: 'location' }\r\n      }\r\n      this.$ajax(loadConfig)\r\n        .then(resp => {\r\n          this.locationList = []\r\n          resp.data.rows.forEach(data => {\r\n            let tmp = {}\r\n            tmp.value = parseInt(data.dicValue)\r\n            tmp.label = data.dicName\r\n            this.locationList.push(tmp)\r\n          })\r\n        })\r\n    }\r\n  },\r\n  /**\r\n     * 视图挂载\r\n     **/\r\n  mounted () {\r\n    this.init()\r\n  }\r\n}\r\n\r\n</script>\r\n"]}]}