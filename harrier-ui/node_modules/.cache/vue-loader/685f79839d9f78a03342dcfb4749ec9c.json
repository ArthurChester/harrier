{"remainingRequest":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\job\\sqlQuery\\Form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\job\\sqlQuery\\Form.vue","mtime":1681468306542},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport utils from '@/common/utils'\r\nconst RESOURCE_PATH = '/systemconfig'\r\n\r\nexport default {\r\n  props: {\r\n    transData: {\r\n      type: Object,\r\n      default: function () {\r\n    \t\t\treturn {}\r\n      }\r\n    }\r\n  \t},\r\n  data () {\r\n    return {\r\n      formBean: {},\r\n      formRule: {\r\n        scPName: [{\r\n          required: true,\r\n          message: '请输入数据！'\r\n        }],\r\n        scSysName: [{\r\n          required: true,\r\n          message: '请输入数据！'\r\n        }],\r\n        jobOfTxDateChange: [{\r\n          validator: (rule, value, callback, source, options) => {\r\n            let ruleRe = /^[a-zA-Z0-9_]+$/g\r\n            if (typeof value === 'undefined' || !value.match(ruleRe)) {\r\n              callback('JOB名称中含有特殊字符或为空')\r\n            } else {\r\n              callback()\r\n            }\r\n          }\r\n        }],\r\n        queryCycle: [{\r\n          required: true,\r\n          message: '请输入数据！'\r\n        }, { validator: (rule, value, callback, source, options) => {\r\n          let ruleRe = /^[1-9]{1}[0-9]{0,3}$/g\r\n          if (typeof value === 'undefined' || !value.match(ruleRe)) {\r\n            callback('只能为1-3位数字')\r\n          } else {\r\n            callback()\r\n          }\r\n        }\r\n        }]\r\n\r\n      },\r\n      platform: [],\r\n      system: []\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n\t\t * 初始化\r\n\t\t **/\r\n    init () {\r\n      if (this.transData.id) { // 如果传过来的存在ID则说明是编辑功能跳转过来\r\n        let loadConfig = {\r\n          method: 'GET',\r\n          url: RESOURCE_PATH + '/' + this.transData.id\r\n        }\r\n        this.$ajax(loadConfig)\r\n          .then(resp => {\r\n            if (resp.data.queryStatus == 'true') {\r\n              resp.data.queryStatus = true\r\n            } else {\r\n              resp.data.queryStatus = false\r\n            }\r\n            if (resp.data.queryAtTimeStatus == 'true') {\r\n              resp.data.queryAtTimeStatus = true\r\n            } else {\r\n              resp.data.queryAtTimeStatus = false\r\n            }\r\n            this.formBean = resp.data\r\n          })\r\n      } else {\r\n        this.bindData()\r\n      }\r\n      this.queryPlatform()\r\n      // this.querySystem();\r\n    },\r\n    /**\r\n\t\t * 如果传过来的有初始数据则进行数据绑定\r\n\t\t **/\r\n    bindData () {\r\n      try {\r\n        this.formBean = Object.assign({}, this.transData.initFormBean)\r\n        if (typeof this.formBean.length === 'undefined') {\r\n          this.formBean.lastTxDate = utils.fmtDate(new Date(), 'yyyy-MM-dd')\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    /**\r\n\t\t * 保存表单\r\n\t\t **/\r\n    save () {\r\n      this.$refs.systemconfigForm.validate(valid => {\r\n        if (!valid) return\r\n        let params = {}\r\n        this.$refs.systemconfigForm.$children.forEach(ele => {\r\n          let propName = ele.$children[0].$children[0].prop\r\n          let labelName = ele.$children[0].$children[0].label\r\n          if (typeof this.formBean[propName] === 'undefined') {\r\n            this.formBean[propName] = null\r\n          }\r\n          this.formBean[propName] = labelName + '#@#' + this.formBean[propName] + '#@#' + propName\r\n        })\r\n        Object.assign(params, this.formBean)\r\n        let httpConfig = {\r\n          url: RESOURCE_PATH,\r\n          data: params\r\n        }\r\n        if (this.transData.id) {\r\n          httpConfig.method = 'PUT'\r\n          httpConfig.url = RESOURCE_PATH + '/' + this.transData.id\r\n        } else {\r\n          httpConfig.method = 'POST'\r\n        }\r\n        this.$ajax(httpConfig)\r\n          .then(resp => {\r\n            this.cancel()\r\n          })\r\n      })\r\n    },\r\n    /**\r\n\t\t * 返回到数据视图\r\n\t\t **/\r\n    cancel () {\r\n      this.$emit('switch')\r\n    },\r\n    queryPlatform () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/msys/getPlatformList'\r\n      }\r\n      this.$ajax(loadConfig)\r\n        .then(resp => {\r\n          let resdata = resp.data\r\n          for (let i = 0; i < resdata.length; i++) {\r\n            let tmp = {}\r\n            tmp.label = resdata[i]\r\n            tmp.value = resdata[i]\r\n            this.platform.push(tmp)\r\n          }\r\n        })\r\n    },\r\n    querySystem () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/msys/getSysList',\r\n        params: { platform: this.formBean.scPName }\r\n      }\r\n      this.$ajax(loadConfig)\r\n        .then(resp => {\r\n          let resdata = resp.data\r\n          this.system = []\r\n          for (let i = 0; i < resdata.length; i++) {\r\n            let tmp = {}\r\n            tmp.label = resdata[i]\r\n            tmp.value = resdata[i]\r\n            this.system.push(tmp)\r\n          }\r\n        })\r\n    }\r\n  },\r\n  /**\r\n\t * 视图挂载\r\n\t **/\r\n  mounted () {\r\n    this.init()\r\n  }\r\n}\r\n\r\n",{"version":3,"sources":["Form.vue"],"names":[],"mappings":";AA0FA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Form.vue","sourceRoot":"src/view/spdb/job/sqlQuery","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<Form ref=\"systemconfigForm\" :model=\"formBean\" :label-width=\"150\" :rules=\"formRule\">\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem prop=\"scPName\" label=\"平台名\">\r\n\t\t\t\t\t\t<Select v-model=\"formBean.scPName\" filterable @on-change=\"querySystem\">\r\n\t\t\t\t\t\t\t<Option v-for=\"item in platform\" :value=\"item.value\" :key=\"item.value\">{{ item.label }}</Option>\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem prop=\"scSysName\" label=\"应用名\">\r\n\t\t\t\t\t\t<Select v-model=\"formBean.scSysName\" filterable>\r\n\t\t\t\t\t\t\t<Option v-for=\"item in system\" :value=\"item.value\" :key=\"item.value\">{{ item.label }}</Option>\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem prop=\"lastTxDate\" label=\"TXDate\">\r\n\t\t\t\t\t\t<Input type=\"text\" v-model=\"formBean.lastTxDate\" readonly/>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem prop=\"timeOfTxDateChange\" label=\"TXDate换日时间\">\r\n\t\t\t\t\t\t<TimePicker :transfer=\"true\"v-model=\"formBean.timeOfTxDateChange\"  format=\"HH:mm\" placeholder=\"Select time\" style=\"width: 112px\"></TimePicker>\r\n\t\t\t\t\t\t<!-- <Input v-model=\"formBean.timeOfTxDateChange\" placeholder=\"例如 06:01 or 21:10\"/> -->\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem prop=\"jobOfTxDateChange\" label=\"TXDate换日作业\">\r\n\t\t\t\t\t\t<Input type=\"text\" v-model=\"formBean.jobOfTxDateChange\" placeholder=\"支持英文、数字、下划线\"/>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem prop=\"queryStatus\" label=\"轮询是否启用\">\r\n\t\t\t\t\t\t<Checkbox v-model=\"formBean.queryStatus\" />\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem  prop=\"queryCycle\" label=\"轮询周期\">\r\n\t\t\t\t\t\t<Input v-model=\"formBean.queryCycle\" placeholder=\"单位 秒\"  />\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem prop=\"queryAtTimeStatus\" label=\"每日查询是否启用\">\r\n\t\t\t\t\t\t<Checkbox v-model=\"formBean.queryAtTimeStatus\" />\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<FormItem prop=\"queryTime\" label=\"每日查询时间\">\r\n\t\t\t\t\t\t<TimePicker :transfer=\"true\"v-model=\"formBean.queryTime\"  format=\"HH:mm\" placeholder=\"Select time\" style=\"width: 112px\"></TimePicker>\r\n\t\t\t\t\t\t<!-- <Input v-model=\"formBean.queryTime\" placeholder=\"例如 06:01 or 21:10\"/> -->\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</Form>\r\n\t\t<br/>\r\n\t\t<div>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"3\">\r\n\t\t\t\t  &nbsp;\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<Button type=\"primary\" icon=\"md-add\" @click=\"save\">保存</Button>\r\n\t\t\t\t\t<Button type=\"primary\" icon=\"ios-trash-outline\" @click=\"cancel\">取消</Button>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport utils from '@/common/utils'\r\nconst RESOURCE_PATH = '/systemconfig'\r\n\r\nexport default {\r\n  props: {\r\n    transData: {\r\n      type: Object,\r\n      default: function () {\r\n    \t\t\treturn {}\r\n      }\r\n    }\r\n  \t},\r\n  data () {\r\n    return {\r\n      formBean: {},\r\n      formRule: {\r\n        scPName: [{\r\n          required: true,\r\n          message: '请输入数据！'\r\n        }],\r\n        scSysName: [{\r\n          required: true,\r\n          message: '请输入数据！'\r\n        }],\r\n        jobOfTxDateChange: [{\r\n          validator: (rule, value, callback, source, options) => {\r\n            let ruleRe = /^[a-zA-Z0-9_]+$/g\r\n            if (typeof value === 'undefined' || !value.match(ruleRe)) {\r\n              callback('JOB名称中含有特殊字符或为空')\r\n            } else {\r\n              callback()\r\n            }\r\n          }\r\n        }],\r\n        queryCycle: [{\r\n          required: true,\r\n          message: '请输入数据！'\r\n        }, { validator: (rule, value, callback, source, options) => {\r\n          let ruleRe = /^[1-9]{1}[0-9]{0,3}$/g\r\n          if (typeof value === 'undefined' || !value.match(ruleRe)) {\r\n            callback('只能为1-3位数字')\r\n          } else {\r\n            callback()\r\n          }\r\n        }\r\n        }]\r\n\r\n      },\r\n      platform: [],\r\n      system: []\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n\t\t * 初始化\r\n\t\t **/\r\n    init () {\r\n      if (this.transData.id) { // 如果传过来的存在ID则说明是编辑功能跳转过来\r\n        let loadConfig = {\r\n          method: 'GET',\r\n          url: RESOURCE_PATH + '/' + this.transData.id\r\n        }\r\n        this.$ajax(loadConfig)\r\n          .then(resp => {\r\n            if (resp.data.queryStatus == 'true') {\r\n              resp.data.queryStatus = true\r\n            } else {\r\n              resp.data.queryStatus = false\r\n            }\r\n            if (resp.data.queryAtTimeStatus == 'true') {\r\n              resp.data.queryAtTimeStatus = true\r\n            } else {\r\n              resp.data.queryAtTimeStatus = false\r\n            }\r\n            this.formBean = resp.data\r\n          })\r\n      } else {\r\n        this.bindData()\r\n      }\r\n      this.queryPlatform()\r\n      // this.querySystem();\r\n    },\r\n    /**\r\n\t\t * 如果传过来的有初始数据则进行数据绑定\r\n\t\t **/\r\n    bindData () {\r\n      try {\r\n        this.formBean = Object.assign({}, this.transData.initFormBean)\r\n        if (typeof this.formBean.length === 'undefined') {\r\n          this.formBean.lastTxDate = utils.fmtDate(new Date(), 'yyyy-MM-dd')\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    /**\r\n\t\t * 保存表单\r\n\t\t **/\r\n    save () {\r\n      this.$refs.systemconfigForm.validate(valid => {\r\n        if (!valid) return\r\n        let params = {}\r\n        this.$refs.systemconfigForm.$children.forEach(ele => {\r\n          let propName = ele.$children[0].$children[0].prop\r\n          let labelName = ele.$children[0].$children[0].label\r\n          if (typeof this.formBean[propName] === 'undefined') {\r\n            this.formBean[propName] = null\r\n          }\r\n          this.formBean[propName] = labelName + '#@#' + this.formBean[propName] + '#@#' + propName\r\n        })\r\n        Object.assign(params, this.formBean)\r\n        let httpConfig = {\r\n          url: RESOURCE_PATH,\r\n          data: params\r\n        }\r\n        if (this.transData.id) {\r\n          httpConfig.method = 'PUT'\r\n          httpConfig.url = RESOURCE_PATH + '/' + this.transData.id\r\n        } else {\r\n          httpConfig.method = 'POST'\r\n        }\r\n        this.$ajax(httpConfig)\r\n          .then(resp => {\r\n            this.cancel()\r\n          })\r\n      })\r\n    },\r\n    /**\r\n\t\t * 返回到数据视图\r\n\t\t **/\r\n    cancel () {\r\n      this.$emit('switch')\r\n    },\r\n    queryPlatform () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/msys/getPlatformList'\r\n      }\r\n      this.$ajax(loadConfig)\r\n        .then(resp => {\r\n          let resdata = resp.data\r\n          for (let i = 0; i < resdata.length; i++) {\r\n            let tmp = {}\r\n            tmp.label = resdata[i]\r\n            tmp.value = resdata[i]\r\n            this.platform.push(tmp)\r\n          }\r\n        })\r\n    },\r\n    querySystem () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/msys/getSysList',\r\n        params: { platform: this.formBean.scPName }\r\n      }\r\n      this.$ajax(loadConfig)\r\n        .then(resp => {\r\n          let resdata = resp.data\r\n          this.system = []\r\n          for (let i = 0; i < resdata.length; i++) {\r\n            let tmp = {}\r\n            tmp.label = resdata[i]\r\n            tmp.value = resdata[i]\r\n            this.system.push(tmp)\r\n          }\r\n        })\r\n    }\r\n  },\r\n  /**\r\n\t * 视图挂载\r\n\t **/\r\n  mounted () {\r\n    this.init()\r\n  }\r\n}\r\n\r\n</script>\r\n"]}]}