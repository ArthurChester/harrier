{"remainingRequest":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\authority\\menu\\Table.vue?vue&type=style&index=0&id=9c1b9f26&lang=css&","dependencies":[{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\authority\\menu\\Table.vue","mtime":1681468306529},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n.ivu-table .ivu-icon-android-add::before {\n  content: \"\\F330\"\n}\n.ivu-table .ivu-icon-ios-minus-empty::before {\n  content: '\\F330'\n}\n",{"version":3,"sources":["Table.vue"],"names":[],"mappings":";AAwOA;AACA;AACA;AACA;AACA;AACA","file":"Table.vue","sourceRoot":"src/view/spdb/authority/menu","sourcesContent":["<template>\r\n  <div>\r\n  <div class=\"spdb-toolbar\">\r\n    <Button type=\"primary\" icon=\"md-add\" @click=\"add()\">新增</Button>\r\n    <Button type=\"primary\" :loading=\"loadingdel\" :disabled=\"ctrlDisable\" icon=\"ios-trash-outline\" @click=\"del()\">删除</Button>\r\n  </div>\r\n    <div class=\"spdb-table\">\r\n      <!-- <tree-table expand-key=\"sex\" :expand-type=\"false\" :selectable=\"false\" :columns=\"columns\" :data=\"data\" >\r\n        <template slot=\"likes\" slot-scope=\"scope\">\r\n          <Button @click=\"handle(scope)\">123</Button>\r\n        </template>\r\n      </tree-table> -->\r\n      <!-- <tree-table expand-key=\"selection\" :loading=\"loading\" :columns=\"menuTitle\" :data=\"menuData\" @on-selection-change=\"select\">\r\n        <template slot=\"op\" slot-scope=\"scope\">\r\n          <Button type=\"info\" @click=\"edit(scope.row)\" style=\"margin-right:5px\" size=\"small\">编辑</Button>\r\n          <Button type=\"info\" @click=\"addChildMenu(scope.row)\" size=\"small\">添加子菜单</Button>\r\n        </template>\r\n      </tree-table> -->\r\n      <!-- <Table rowkey=\"id\" :columns=\"menuTitleNew\" :data=\"menuData\" border></Table> -->\r\n      <s-tree-table :loading=\"loading\" :columns=\"menuTitle\" :data=\"menuData\" @on-selection-change=\"select\"></s-tree-table>\r\n      <!-- <Table :loading=\"loading\" :columns=\"menuTitle\" :data=\"menuData\" @on-selection-change=\"select\"></Table> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport STreeTable from '_c/s-tree-table'\r\nimport common from '@/mixins/common'\r\n\r\nexport default {\r\n  mixins: [ common ],\r\n  components: {\r\n    STreeTable\r\n  },\r\n  data: function () {\r\n    return {\r\n      demouser: {},\r\n      loadingdel: false,\r\n      menuTitleNew: [\r\n        {\r\n          title: '菜单名称',\r\n          key: 'menuName',\r\n          tree: true\r\n        },\r\n        {\r\n          title: '菜单链接',\r\n          key: 'menuUrl'\r\n        },\r\n        {\r\n          title: '菜单图标',\r\n          key: 'menuIcon'\r\n        }\r\n      ],\r\n      menuTitle: [\r\n        {\r\n          type: 'selection',\r\n          width: 60,\r\n          align: 'center'\r\n        },\r\n        {\r\n          type: 'tree',\r\n          width: 60,\r\n          fixed: 'left',\r\n        },\r\n        {\r\n          title: '菜单名称',\r\n          width: 200,\r\n          key: 'text'\r\n        },\r\n        {\r\n          title: '菜单链接',\r\n          key: 'attributes',\r\n          width: 300,\r\n          render: (h, { row, index, column }) => {\r\n  \r\n            return h('span', {}, row.attributes.url)\r\n          }\r\n        },\r\n        {\r\n          title: '菜单图标',\r\n          key: 'attributes',\r\n          render: (h, { row, index, column }) => {\r\n            if (row.attributes.icon && row.attributes.icon.startsWith('spdb-')) {\r\n              const icon = row.attributes.icon.replace('spdb', 'icon')\r\n              return h('i', {\r\n                class: [\r\n                  'iconfont',\r\n                  icon\r\n                ]\r\n              })\r\n            } else {\r\n              return h('Icon', {\r\n                props: {\r\n                  size: 20,\r\n                  type: row.attributes.icon\r\n                }\r\n              })\r\n            }\r\n          }\r\n        },\r\n        {\r\n          title: '操作',\r\n          render: (h, { row, index, column }) => {\r\n            return h('div', [\r\n              h(\r\n                'Button',\r\n                {\r\n                  props: {\r\n                    size: 'small',\r\n                    type: 'info'\r\n                  },\r\n                  style: {\r\n                    marginRight: '5px'\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      let id = row.id\r\n                      this.$emit('switch', { id: id, isNoPath: false }) // 提交form事件，在parent中显示formrow.level == 1?true:false\r\n                    }\r\n                  }\r\n                },\r\n                '编辑'\r\n              ),\r\n              h(\r\n                'Button',\r\n                {\r\n                  props: {\r\n                    size: 'small',\r\n                    type: 'info',\r\n                    disabled: row.level == 3\r\n                  },\r\n                  style: {\r\n                    marginRight: '5px'\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      let id = row.id\r\n                      this.$emit('switch', { parentId: id, isNoPath: row.level == 0 }) // 提交form事件，在parent中显示form\r\n                    }\r\n                  }\r\n                },\r\n                '添加子菜单'\r\n              )\r\n            ])\r\n          }\r\n        }\r\n      ],\r\n      menuData: [],\r\n      request: {\r\n        listReq: {\r\n          method: 'GET',\r\n          url: 'menu'\r\n        },\r\n        delReq: {\r\n          method: 'DELETE',\r\n          url: 'menu'\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    init: function () {\r\n      this.$ajax(this.request.listReq)\r\n        .then(resp => {\r\n          this.menuData = resp.data\r\n          this.makeData()\r\n        })\r\n        .then(resp => {\r\n          this.loading = false\r\n        })\r\n        .catch(error => {\r\n          this.loading = false\r\n          console.log(error)\r\n        })\r\n    },\r\n    add: function () {\r\n      this.$emit('switch', { isNoPath: false })\r\n    },\r\n    del: function () {\r\n      const ids = Array.from(this.selection, e => e.id)\r\n      this.request.delReq.url = 'menu/' + ids\r\n      this.loadingdel = true\r\n      this.$ajax(this.request.delReq)\r\n        .then(resp => {\r\n          this.loadingdel = false\r\n          this.ctrlDisable = true\r\n          this.init()\r\n        })\r\n    },\r\n    makeData: function () {\r\n      let temp = this.menuData\r\n      let children = []\r\n      let result = []\r\n      let map = new Map()\r\n      let level = 1\r\n      while (temp.length > 0) {\r\n        let current = temp.pop()\r\n        current.level = level\r\n        map.set(current.id, current)\r\n        for (const t of current.children) {\r\n          children.push(t)\r\n        }\r\n        if (current.level === 1) {\r\n          result.push(current)\r\n        }\r\n        if (temp.length === 0) {\r\n          temp = children\r\n          children = []\r\n          level++\r\n        }\r\n      }\r\n      this.menuData = result\r\n    },\r\n    edit (row) {\r\n      \r\n    },\r\n    addChildMenu (row) {\r\n\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n .ivu-table .ivu-icon-android-add::before {\r\n   content: \"\\F330\"\r\n }\r\n .ivu-table .ivu-icon-ios-minus-empty::before {\r\n   content: '\\F330'\r\n }\r\n</style>\r\n"]}]}