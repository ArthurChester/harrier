{"remainingRequest":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\job\\jobList\\Jobimg.vue?vue&type=style&index=0&id=2d8f2f0f&scoped=true&lang=css&","dependencies":[{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\job\\jobList\\Jobimg.vue","mtime":1681468306537},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n.rightmenu {\r\n  margin: 0 auto;\r\n  padding: 0px;\r\n  background-image: url(\"~@/assets/jobimg/bj.png\");\r\n}\r\n/* .backtopre {\r\n  float: right;\r\n} */\r\n.btnBabel {\r\n  margin-bottom: 8px;\r\n  margin-right: 8px;\r\n}\r\n.wrapper {\r\n  /*background-color: #F5F5F5;*/\r\n  width: 96%;\r\n}\r\n.container {\r\n  width: 96%;\r\n  margin: 0px auto;\r\n}\r\n.float-e-margins {\r\n  width: 32%;\r\n  height: 250px;\r\n  margin-left: 1%;\r\n  background-color: rgba(\r\n    250,\r\n    250,\r\n    250,\r\n    0.5\r\n  ); /*background-image: linear-gradient(#F5F5F5,#D2D2D2);*/\r\n  box-shadow: 0px 0px 20px 0px #d5dee7;\r\n  border-radius: 20px;\r\n  /* height: 300px; background:url('../../img/background11.png')  */\r\n}\r\n.title {\r\n  font-family: Microsoft YaHei;\r\n  font-size: 20px;\r\n  color: #2d343a;\r\n  padding-left: 20px;\r\n  font-weight: bold;\r\n}\r\n.modal-body {\r\n  padding: 0px;\r\n  background: url(\"~@/assets/jobimg/bj.png\");\r\n}\r\n.imagestyle {\r\n  margin-bottom: 3px;\r\n  margin-right: 5px;\r\n}\r\n.row {\r\n  width: 100%;\r\n  /* margin: 0px auto; */\r\n  margin-right: 0px;\r\n  margin-left: 5px;\r\n  margin-top: 20px;\r\n  margin-bottom: 10px;\r\n}\r\n#base {\r\n  padding-top: 10px;\r\n  padding-left: 20px; /*height:210px*/\r\n}\r\n#influ {\r\n  padding-top: 10px;\r\n  padding-left: 20px; /*height:210px*/\r\n}\r\n#life {\r\n  padding-top: 10px;\r\n  padding-left: 20px; /*height:210px*/\r\n}\r\n#maind {\r\n  width: 750px; /*margin: 0 auto;*/\r\n  height: 410px; /*overflow: hidden;*/\r\n}\r\n\r\n#main {\r\n  width: 420px;\r\n  margin: 0px auto;\r\n  height: 467px;\r\n  overflow: hidden;\r\n}\r\n#energyMap {\r\n  width: 750px; /*margin: 0 auto;*/\r\n  height: 330px;\r\n  margin-top: 20px;\r\n  overflow: hidden;\r\n}\r\n#btnLink {\r\n  margin-bottom: 5px;\r\n  margin-right: 5px;\r\n  height: 34px;\r\n  background-color: #2780e3;\r\n  border-color: #2780e3;\r\n}\r\n.titlestyle {\r\n  width: 90%;\r\n  margin: 0px auto; /*background: #FFFFFF;*/\r\n  border-radius: 20px;\r\n}\r\n.resource {\r\n  min-height: 350px;\r\n  float: left;\r\n  width: 58%;\r\n  height: 455px;\r\n  background-color: rgba(250, 250, 250, 0.5);\r\n  box-shadow: 0px 0px 20px 0px rgba(18, 42, 99, 0.2);\r\n  border-radius: 20px; /*background-image: linear-gradient(#F5F5F5,#D2D2D2);*/ /*background:url('../../img/background22.png')*/\r\n}\r\n.h5style {\r\n  font-family: Microsoft YaHei;\r\n  font-size: 20px;\r\n  color: #2d343a;\r\n  letter-spacing: 0;\r\n  line-height: 22px;\r\n  padding-top: 20px; /*padding-left: 7%;*/\r\n  font-weight: bold;\r\n}\r\n#TimeLevel {\r\n  width: 520px;\r\n  margin: 0 auto;\r\n  height: 250px;\r\n  overflow: hidden;\r\n}\r\n.resourceinner {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 300px;\r\n  padding: 0px;\r\n  margin-top: 60px;\r\n  border-width: 0px;\r\n  cursor: default;\r\n}\r\n#JobRate {\r\n  width: 520px;\r\n  margin: 0 auto;\r\n  height: 600px;\r\n  overflow: hidden;\r\n}\r\n.jobscore {\r\n  min-height: 350px;\r\n  float: left;\r\n  width: 40%;\r\n  height: 570px;\r\n  background-color: rgba(250, 250, 250, 0.5);\r\n  box-shadow: 0px 0px 20px 0px rgba(18, 42, 99, 0.3);\r\n  border-radius: 20px;\r\n  margin-right: 20px; /*background-image: linear-gradient(#F5F5F5,#D2D2D2);*/ /*background:url('../../img/background21.png')*/\r\n}\r\n.lineage {\r\n  min-height: 350px;\r\n  float: left;\r\n  width: 58%;\r\n  height: 570px;\r\n  background-color: rgba(250, 250, 250, 0.5);\r\n  box-shadow: 0px 0px 20px 0px rgba(18, 42, 99, 0.3);\r\n  border-radius: 20px; /*background-image: linear-gradient(#F5F5F5,#D2D2D2);*/ /*background:url('../../img/background22.png')*/\r\n}\r\n.performance {\r\n  min-height: 350px;\r\n  float: left;\r\n  width: 40%;\r\n  height: 455px;\r\n  background-color: rgba(250, 250, 250, 0.5);\r\n  box-shadow: 0px 0px 20px 0px rgba(18, 42, 99, 0.3);\r\n  border-radius: 20px;\r\n  margin-right: 20px; /*background-image: linear-gradient(#F5F5F5,#D2D2D2);*/ /*background:url('@/assets/jobimg/background21.png')*/\r\n}\r\n.analysis {\r\n  margin: 0 auto;\r\n  overflow: hidden;\r\n  margin-top: 5px;\r\n  margin-left: 50px;\r\n  text-align: center;\r\n}\r\n.btnstyle {\r\n  /* margin: 0 auto;\r\n  overflow: hidden;\r\n  margin-top: 5px;\r\n  margin-left: 50px;\r\n  text-align: center; */\r\n\r\n  margin: 0 auto;\r\n  overflow: hidden;\r\n  margin-top: 5px;\r\n  text-align: center;\r\n}\r\n\r\n.tableTitle{\r\n  margin-left: 280px;\r\n  font-size: 18px;\r\n}\r\n.imgTitle{\r\n  margin-top: 5px;\r\n  margin-left: 25%;\r\n  padding-top:5px;\r\n  height: 35px;\r\n  font-size: 25px;\r\n  font-weight: bold;\r\n  background-color: transparent\r\n}\r\n.tagstyle {\r\n  background-color: transparent ;\r\n  font-size: 14px;\r\n  margin-left: 0.5em;\r\n}\r\n",{"version":3,"sources":["Jobimg.vue"],"names":[],"mappings":";AAkzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Jobimg.vue","sourceRoot":"src/view/spdb/job/jobList","sourcesContent":["<template>\r\n  <div class=\"rightmenu\">\r\n    <div >\r\n      <Button type=\"primary\" icon=\"ios-arrow-back\" @click=\"cancel\" >返回</Button>\r\n      <Tag class=\"imgTitle\">{{ jobinfo.job }}作业画像</Tag>\r\n\r\n    </div>\r\n    <Row class=\"row\">\r\n      <Col class=\"float-e-margins\" span=\"8\">\r\n        <span class=\"title\">\r\n          <img class=\"imagestyle\" src=\"@/assets/jobimg/basic.png\" />基础属性\r\n        </span>\r\n        <div id=\"basis\">\r\n          <Tag type=\"dot\" class=\"tagstyle\">作业：{{baseAttr.jobname}}</Tag>\r\n          <br/>\r\n          <Tag type=\"dot\" class=\"tagstyle\">所属平台：{{baseAttr.platform}}</Tag>\r\n          <br/>\r\n          <Tag type=\"dot\" class=\"tagstyle\">所属应用：{{baseAttr.system}}</Tag>\r\n          <br/>\r\n          <Tag type=\"dot\" class=\"tagstyle\">{{baseAttr.type}}</Tag>\r\n          <Tag type=\"dot\" class=\"tagstyle\">所属批次：{{baseAttr.batchNum}}</Tag>\r\n          <br/>\r\n          <Tag type=\"dot\" class=\"tagstyle\">{{baseAttr.virtual_enable}}</Tag>\r\n          <Tag type=\"dot\" class=\"tagstyle\">{{baseAttr.jobType}}</Tag>\r\n          <Tag type=\"dot\" class=\"tagstyle\" v-if=\"baseAttr.contactuser!=''\">作业联系人: {{baseAttr.contactuser}}</Tag>\r\n        </div>\r\n      </Col>\r\n\r\n      <Col class=\"float-e-margins\" span=\"8\">\r\n        <span class=\"title\">\r\n          <img class=\"imagestyle\" src=\"@/assets/jobimg/life.png\" />生命周期\r\n        </span>\r\n        <div id=\"life\">\r\n          <Tag type=\"dot\" class=\"tagstyle\">首次上线：{{lifeCycle.createTime}}</Tag>\r\n          <br/>\r\n          <Tag type=\"dot\" class=\"tagstyle\">最近变更：{{lifeCycle.updateTime}}</Tag>\r\n          <br/>\r\n          <Tag type=\"dot\" class=\"tagstyle\">当前版本号：{{lifeCycle.version}}</Tag>\r\n        </div>\r\n      </Col>\r\n\r\n      <Col class=\"float-e-margins\" span=\"8\">\r\n        <span class=\"title\">\r\n          <img class=\"imagestyle\" src=\"@/assets/jobimg/influ.png\" />影响概览\r\n        </span>\r\n        <div id=\"influ\">\r\n          <Tag type=\"dot\" class=\"tagstyle\">影响类型：{{influence.influjob}}</Tag>\r\n          <Tag type=\"dot\" class=\"tagstyle\" v-if=\"jobinfo.platform === 'EDW'\">{{influence.keyReportJob}}</Tag>\r\n          <Tag type=\"dot\" class=\"tagstyle\" >{{influence.influenceSys}}</Tag>\r\n          <Tag type=\"dot\" class=\"tagstyle\">{{influence.influenceJobType}}</Tag>\r\n          <Tag type=\"dot\" class=\"tagstyle\">影响下游{{influence.sysnum}}个应用系统</Tag>\r\n          <Tag type=\"dot\" class=\"tagstyle\">影响下游{{influence.jobnum}}个作业</Tag>\r\n          <br/>\r\n          <Tag type=\"dot\" class=\"tagstyle\" style=\"float: left;\">影响TOP3应用(作业数):\r\n          </Tag >\r\n            <li style=\"margin-left: 15em;margin-top:3px;list-style-type:none;\"  v-for=\"item in influence.top5sys\" :key=\"item\">\r\n              <Tag class=\"tagstyle\" style=\"font-size: 12px;\" >{{item}}</Tag>\r\n            </li>\r\n\r\n          <!-- <Tag type=\"dot\" class=\"tagstyle\">{{ influence.top5sys }}</Tag> -->\r\n          <!-- <Card>\r\n              <p slot=\"title\">影响TOP3应用(作业数):</p>\r\n              <li v-for=\"item in influence.top5sys\">\r\n                {{ item }}\r\n              </li>\r\n\r\n          </Card> -->\r\n\r\n        </div>\r\n      </Col>\r\n    </Row>\r\n\r\n    <div class=\"container\">\r\n      <Row class=\"row\">\r\n        <Col class=\"jobscore\">\r\n          <div class=\"titlestyle\">\r\n            <h5 class=\"h5style\">\r\n              <img class=\"imagestyle\" src=\"@/assets/jobimg/time.png\" />作业评分\r\n            </h5>\r\n          </div>\r\n          <JobRate :transData=\"jobinfo\"></JobRate>\r\n          <!--<div id=\"main\"></div>-->\r\n        </Col>\r\n\r\n        <Col class=\"lineage\">\r\n          <div class=\"titlestyle\">\r\n            <h5 class=\"h5style\">\r\n              <img class=\"imagestyle\" src=\"@/assets/jobimg/xueyuan.png\" />血缘分析\r\n            </h5>\r\n\r\n            <div id=\"xueyuanMap\">\r\n              <Tag type=\"dot\" class=\"tagstyle\">{{lineageMsg}}</Tag>\r\n            </div>\r\n          </div>\r\n          <div id=\"maind\">\r\n            <Lineage id=\"maind\" :transData=\"transData\" ref=\"lineage\"></Lineage>\r\n          </div>\r\n\r\n          <div class=\"analysis\">\r\n            <Button type=\"primary\" id=\"btnLink\" v-if=\"jobinfo.platform === 'EDW'\" @click=\"linktodataworks\">深入分析</Button>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <!-- 时效分析 -->\r\n      <Row class=\"row\">\r\n        <Col class=\"performance\">\r\n          <div class=\"titlestyle\">\r\n            <h5 class=\"h5style\">\r\n              <img class=\"imagestyle\" src=\"@/assets/jobimg/radar.png\" />时效分析\r\n            </h5>\r\n            <div id=\"timeLabel\">\r\n              <Tag type=\"dot\" class=\"tagstyle\">近一个月最高耗时：{{jobConsume.maxTime}}</Tag>\r\n              <Tag type=\"dot\" class=\"tagstyle\">近一个月平均耗时：{{jobConsume.avgTime}}</Tag>\r\n              <Tag type=\"dot\" class=\"tagstyle\">时效级别：{{jobinfo.effectiveClass}}</Tag>\r\n              <Tag type=\"dot\" class=\"tagstyle\">整体链路层级：{{jobinfo.jobLev}}</Tag>\r\n              <Tag type=\"dot\" class=\"tagstyle\">内部链路层级：{{jobinfo.sysJobLev}}</Tag>\r\n            </div>\r\n          </div>\r\n          <!-- <div id=\"TimeLevel\"> -->\r\n          <TimeLevel :transData=\"jobinfo\"></TimeLevel>\r\n          <!-- </div> -->\r\n          <div class=\"btnstyle\">\r\n            <Button type=\"primary\" id=\"btnLink\" @click=\"ProcessDisplayLink()\">作业最长链路</Button>\r\n            <Button type=\"primary\" id=\"btnLink\" @click=\"ProcessFenxi()\">时效提升分析</Button>\r\n            <Modal\r\n              :title=\"linkTitle\"\r\n              v-model=\"jobinfo.link\"\r\n              class-name=\"vertical-center-modal\"\r\n              width=\"1310\"\r\n            >\r\n              <Table\r\n                :columns=\"jobinfo.columnsLink\"\r\n                :data=\"jobinfo.longestLinkData\"\r\n                size=\"small\"\r\n                ref=\"linktable\"\r\n              ></Table>\r\n              <br />\r\n              <Button type=\"primary\" size=\"large\" @click=\"exportLinkData()\">\r\n                <Icon type=\"ios-download-outline\"></Icon>导出数据\r\n              </Button>\r\n            </Modal>\r\n\r\n            <Modal\r\n              :title=\"performanceTitle\"\r\n              v-model=\"jobinfo.performance\"\r\n              class-name=\"vertical-center-modal\"\r\n              width=\"1000\"\r\n            >\r\n\r\n              <div>\r\n                <Button type=\"primary\" size=\"large\" @click=\"exportSourceData(1)\">\r\n                  <Icon type=\"ios-download-outline\"></Icon>导出数据\r\n                </Button>\r\n                <Tag class=\"tableTitle\" >源系统供数时间</Tag>\r\n              </div>\r\n              <Table\r\n                :columns=\"jobinfo.columnsSourceJob\"\r\n                :data=\"jobinfo.sourceJobData\"\r\n                size=\"small\"\r\n                ref=\"sourcetable\"\r\n              ></Table>\r\n\r\n              <br />\r\n\r\n              <div>\r\n                <Button type=\"primary\" size=\"large\" @click=\"exportDirDepData()\">\r\n                  <Icon type=\"ios-download-outline\"></Icon>导出数据\r\n                </Button>\r\n                <Tag class=\"tableTitle\">依赖作业最晚完成时间TOP10</Tag>\r\n              </div>\r\n              <Table\r\n                :columns=\"jobinfo.columnsDireJobTop\"\r\n                :data=\"jobinfo.direJobTopData\"\r\n                size=\"small\"\r\n                ref=\"dirdeptable\"\r\n              ></Table>\r\n\r\n              <br />\r\n\r\n              <div>\r\n                <Button type=\"primary\" size=\"large\" @click=\"exportDepData(1)\">\r\n                  <Icon type=\"ios-download-outline\"></Icon>导出数据\r\n                </Button>\r\n                <Tag class=\"tableTitle\">上游作业运行耗时TOP10</Tag>\r\n              </div>\r\n              <Table\r\n                :columns=\"jobinfo.columnsUpJobTop\"\r\n                :data=\"jobinfo.upJobTopData\"\r\n                size=\"small\"\r\n                ref=\"deptable\"\r\n              ></Table>\r\n            </Modal>\r\n          </div>\r\n        </Col>\r\n        <!-- 资源消耗 -->\r\n        <Col class=\"resource\">\r\n          <div class=\"titlestyle\">\r\n            <h5 class=\"h5style\">\r\n              <img class=\"imagestyle\" src=\"@/assets/jobimg/emergy.png\" />资源消耗\r\n            </h5>\r\n            <div id=\"energyLabel\">\r\n              <!-- <Button type=\"text\" class=\"btnBabel btn-light\">作业权重：40</Button>\r\n              <Button type=\"text\" class=\"btnBabel btn-light\">作业优先级：600</Button>\r\n              <Button type=\"text\" class=\"btnBabel btn-light\">近1月CPU最高占用：34567</Button>\r\n              <Button type=\"text\" class=\"btnBabel btn-light\">近1月CPU平均占用：30000</Button>\r\n              <Button type=\"text\" class=\"btnBabel btn-light\">近1月最高耗时：00:05:36</Button>\r\n              <Button type=\"text\" class=\"btnBabel btn-light\">近1月平均耗时：00:05:36</Button> -->\r\n            </div>\r\n          </div>\r\n          <!-- <div id=\"energyMap\"></div> -->\r\n          <Resource :transData=\"jobinfo\" class=\"resourceinner\"></Resource>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TimeLevel from './jobimgs/timeLevel'\r\nimport Resource from './jobimgs/resource'\r\nimport Lineage from './jobimgs/lineage'\r\nimport JobRate from './jobimgs/jobRate'\r\nexport default {\r\n  components: {\r\n    TimeLevel,\r\n    Resource,\r\n    Lineage,\r\n    JobRate\r\n  },\r\n  props: {\r\n    transData: {\r\n      type: Object,\r\n      default: function () {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      jobinfo: {\r\n        job: '',\r\n        platform: '',\r\n        system: '',\r\n        link: false,\r\n        performance: false,\r\n        columnsLink: [\r\n          {\r\n            title: '链路层级',\r\n            align: 'center',\r\n            width: 100,\r\n            // sortable: true,\r\n            key: 'lev'\r\n          },\r\n          {\r\n            title: '平台名',\r\n            ellipsis: true,\r\n            width: 80,\r\n            // sortable: true,\r\n            key: 'platform'\r\n          },\r\n          {\r\n            title: '应用名',\r\n            ellipsis: true,\r\n            align: 'left',\r\n            width: 90,\r\n            // sortable: true,\r\n            className: 'uds-job-column',\r\n            key: 'system'\r\n          },\r\n          {\r\n            title: '作业名',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 335,\r\n            className: 'uds-job-column',\r\n            key: 'job'\r\n          },\r\n          {\r\n            title: '批量日期',\r\n            ellipsis: true,\r\n            align: 'left',\r\n            width: 120,\r\n            className: 'uds-job-column',\r\n            key: 'job_date'\r\n          },\r\n          {\r\n            title: '开始时间',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 175,\r\n            className: 'uds-job-column',\r\n            key: 'start_time'\r\n          },\r\n          {\r\n            title: '完成时间',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 175,\r\n            className: 'uds-job-column',\r\n            key: 'end_time'\r\n          },\r\n          {\r\n            title: '等待时间',\r\n            // ellipsis: true,\r\n            align: 'center',\r\n            width: 100,\r\n            className: 'uds-job-column',\r\n            key: 'consume'\r\n          },\r\n          {\r\n            title: '作业属性',\r\n            ellipsis: true,\r\n            align: 'center',\r\n            width: 100,\r\n            className: 'uds-job-column',\r\n            key: 'virtual_enable'\r\n          }\r\n        ],\r\n        longestLinkData: [],\r\n\r\n        columnsDireJobTop: [\r\n          {\r\n            title: '应用名',\r\n            ellipsis: true,\r\n            align: 'left',\r\n            width: 90,\r\n            // sortable: true,\r\n            className: 'uds-job-column',\r\n            key: 'system'\r\n          },\r\n          {\r\n            title: '作业名',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 350,\r\n            className: 'uds-job-column',\r\n            key: 'dep_job'\r\n          },\r\n          {\r\n            title: '开始时间',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 175,\r\n            className: 'uds-job-column',\r\n            key: 'startTime'\r\n          },\r\n          {\r\n            title: '完成时间',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 175,\r\n            className: 'uds-job-column',\r\n            key: 'endTime'\r\n          },\r\n          {\r\n            title: '平均完成时间',\r\n            // ellipsis: true,\r\n            align: 'center',\r\n            width: 130,\r\n            className: 'uds-job-column',\r\n            key: 'avgTime'\r\n          }\r\n        ],\r\n        direJobTopData: [],\r\n        columnsUpJobTop: [\r\n          {\r\n            title: '应用名',\r\n            ellipsis: true,\r\n            align: 'left',\r\n            width: 90,\r\n            // sortable: true,\r\n            className: 'uds-job-column',\r\n            key: 'system'\r\n          },\r\n          {\r\n            title: '作业名',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 350,\r\n            className: 'uds-job-column',\r\n            key: 'job'\r\n          },\r\n          {\r\n            title: '本次耗时',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 175,\r\n            className: 'uds-job-column',\r\n            key: 'consume'\r\n          },\r\n          {\r\n            title: '最高耗时',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 175,\r\n            className: 'uds-job-column',\r\n            key: 'maxTime'\r\n          },\r\n          {\r\n            title: '平均耗时',\r\n            // ellipsis: true,\r\n            align: 'center',\r\n            width: 130,\r\n            className: 'uds-job-column',\r\n            key: 'avgTime'\r\n          }\r\n        ],\r\n        upJobTopData: [],\r\n        columnsSourceJob: [\r\n          {\r\n            title: '应用名',\r\n            ellipsis: true,\r\n            align: 'left',\r\n            width: 90,\r\n            // sortable: true,\r\n            className: 'uds-job-column',\r\n            key: 'system'\r\n          },\r\n          {\r\n            title: '作业名',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 350,\r\n            className: 'uds-job-column',\r\n            key: 'job'\r\n          },\r\n          {\r\n            title: '开始时间',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 175,\r\n            className: 'uds-job-column',\r\n            key: 'start_time'\r\n          },\r\n          {\r\n            title: '结束时间',\r\n            // ellipsis: true,\r\n            align: 'left',\r\n            width: 175,\r\n            className: 'uds-job-column',\r\n            key: 'end_time'\r\n          },\r\n          {\r\n            title: '平均供数时间',\r\n            // ellipsis: true,\r\n            align: 'center',\r\n            width: 130,\r\n            className: 'uds-job-column',\r\n            key: 'avgTime'\r\n          }\r\n        ],\r\n        sourceJobData: [],\r\n        jobLev: 1,\r\n        sysJobLev: 1,\r\n        effectiveClass: ''\r\n      },\r\n      jobConsume: {\r\n        maxTime: '',\r\n        avgTime: ''\r\n      },\r\n      baseAttr: {\r\n        jobname: '',\r\n        platform: '',\r\n        system: '',\r\n        type: '',\r\n        jobType: '',\r\n        virtual_enable: '',\r\n        batchNum: '',\r\n        contactuser: ''\r\n      },\r\n      influence: {\r\n        sysnum: '',\r\n        jobnum: '',\r\n        influjob: '',\r\n        influenceJobType: '',\r\n        influenceSys: '',\r\n        keyReportJob: '',\r\n        top5sys: ''\r\n      },\r\n      lineageMsg: '',\r\n      lifeCycle: {\r\n        createTime: '',\r\n        updateTime: '',\r\n        version: ''\r\n      },\r\n      bloodUrl: ''\r\n\r\n    }\r\n  },\r\n  computed: {\r\n    // eslint-disable-next-line vue/return-in-computed-property\r\n    linkTitle () {\r\n      return this.jobinfo.job + ' 作业最长链路'\r\n    },\r\n\r\n    performanceTitle () {\r\n      return this.jobinfo.job + ' 作业时效提升分析'\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    init () {\r\n      // console.log(this.transData)\r\n      this.getlineageData()\r\n    },\r\n    getlineageData () { // 循环获得子组件数据\r\n      let msg\r\n      setTimeout(() => {\r\n        msg = this.$refs.lineage.getSumData()\r\n        if (msg.jobCnt !== -1 && msg.systemCnt !== -1) {\r\n          this.lineageMsg = '总共' + msg.systemCnt + '个应用' + msg.jobCnt + '个作业'\r\n        } else {\r\n          this.getlineageData()\r\n        }\r\n      }, 30)\r\n    },\r\n    linktodataworks () {\r\n      window.open(this.bloodUrl)\r\n    },\r\n    cancel () {\r\n      let prevTab = ''\r\n      if (this.transData.tabObj) {\r\n        prevTab = this.transData.tabObj.prevTab\r\n        prevTab = 'joblist'\r\n      }\r\n      let queryCache = {\r\n        formBean: this.transData.formBean,\r\n        currentPage: this.transData.currentPage,\r\n        pageSize: this.transData.pageSize\r\n      }\r\n      let backParam = { statusName: 'table', prevTab: prevTab, type: 'back' }\r\n      if (this.transData.jobStatus) {\r\n        queryCache.jobStatus = this.transData.jobStatus\r\n      }\r\n      this.$emit('switch', Object.assign({}, queryCache, backParam))\r\n    },\r\n\r\n    ProcessDisplayLink () {\r\n      this.jobinfo.link = true\r\n    },\r\n\r\n    ProcessFenxi () {\r\n      this.jobinfo.performance = true\r\n    },\r\n\r\n    getLongestLink () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/longestLink',\r\n        params: {\r\n          platform: this.jobinfo.platform,\r\n          job: this.jobinfo.job\r\n        }\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        this.jobinfo.longestLinkData = resp.data\r\n      })\r\n    },\r\n\r\n    getDireJobtop () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/getDireJobtop',\r\n        params: {\r\n          job: this.jobinfo.job\r\n        }\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        this.jobinfo.direJobTopData = resp.data\r\n      })\r\n    },\r\n\r\n    getUpJobtop () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/getUpJobtop',\r\n        params: {\r\n          platform: this.jobinfo.platform,\r\n          job: this.jobinfo.job\r\n        }\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        this.jobinfo.upJobTopData = resp.data\r\n      })\r\n    },\r\n\r\n    getSourceJob () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/getSourceJob',\r\n        params: {\r\n          platform: this.jobinfo.platform,\r\n          job: this.jobinfo.job\r\n        }\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        this.jobinfo.sourceJobData = resp.data\r\n      })\r\n    },\r\n\r\n    getJobLev () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/getJobLev',\r\n        params: {\r\n          platform: this.jobinfo.platform,\r\n          system: this.jobinfo.system,\r\n          job: this.jobinfo.job\r\n        }\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        this.jobinfo.jobLev = resp.data.joblev\r\n        this.jobinfo.sysJobLev = resp.data.sysJobLev\r\n      })\r\n    },\r\n\r\n    getJobConsume () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/getJobConsume',\r\n        params: {\r\n          job: this.jobinfo.job\r\n        }\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        this.jobConsume = resp.data\r\n      })\r\n    },\r\n\r\n    getBaseAttr () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/getBaseAttr',\r\n        params: {\r\n          platform: this.jobinfo.platform,\r\n          system: this.jobinfo.system,\r\n          job: this.jobinfo.job\r\n        }\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        // console.log(resp.data)\r\n        if (resp.data.virtual_enable == 1) {\r\n          this.baseAttr.virtual_enable = '虚作业'\r\n        } else {\r\n          this.baseAttr.virtual_enable = '实作业'\r\n        }\r\n        // eslint-disable-next-line no-unused-expressions\r\n        this.baseAttr.jobname = resp.data.job_name,\r\n        this.baseAttr.platform = resp.data.platform,\r\n        this.baseAttr.system = resp.data.system,\r\n        this.baseAttr.type = resp.data.type,\r\n        this.baseAttr.jobType = resp.data.jobType\r\n        this.baseAttr.batchNum = resp.data.multi_batch\r\n        if (resp.data.contactuser) {\r\n          if (resp.data.contactuser.endsWith(',')) {\r\n            this.baseAttr.contactuser = resp.data.contactuser.slice(0, resp.data.contactuser.length - 1)\r\n          } else {\r\n            this.baseAttr.contactuser = resp.data.contactuser\r\n          }\r\n        }\r\n\r\n        if (resp.data.priority > 100) {\r\n          this.jobinfo.effectiveClass = '高'\r\n        } else {\r\n          this.jobinfo.effectiveClass = '普通'\r\n        }\r\n      })\r\n    },\r\n\r\n    getInfluence () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/getInfluence',\r\n        params: {\r\n          platform: this.jobinfo.platform,\r\n          system: this.jobinfo.system,\r\n          job: this.jobinfo.job\r\n        }\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        if (resp.data.jobnum != 0) {\r\n          this.influence.influjob = '影响下游作业'\r\n        } else {\r\n          this.influence.influjob = '不影响下游作业'\r\n        }\r\n        this.influence.sysnum = resp.data.sysnum\r\n        this.influence.jobnum = resp.data.jobnum\r\n      })\r\n    },\r\n\r\n    getUpJobStat () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/getUpJobStat',\r\n        params: {\r\n          platform: this.jobinfo.platform,\r\n          system: this.jobinfo.system,\r\n          job: this.jobinfo.job\r\n        }\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        console.log(resp.data)\r\n      })\r\n    },\r\n\r\n    getDownJobStat () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/getDownJobStat',\r\n        params: {\r\n          platform: this.jobinfo.platform,\r\n          job: this.jobinfo.job\r\n        }\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        // console.log(resp)\r\n        if (resp.data.keyReportJob == 1) {\r\n          this.influence.keyReportJob = '影响关键日报'\r\n        } else {\r\n          this.influence.keyReportJob = '不影响关键日报'\r\n        }\r\n        if (resp.data.influKeyJobType == 0) {\r\n          this.influence.influenceJobType = '不影响关键作业'\r\n          this.influence.influenceSys = '不影响关键应用'\r\n        } else if (resp.data.influKeyJobType == 1) {\r\n          this.influence.influenceJobType = '影响关键作业'\r\n          this.influence.influenceSys = '影响关键应用'\r\n        } else {\r\n          this.influence.influenceJobType = '此作业为关键作业'\r\n          this.influence.influenceSys = '影响关键应用'\r\n        }\r\n\r\n        // resp.data.top5sys.forEach(element => {\r\n        //   this.influence.top5sys = this.influence.top5sys + ',' + element\r\n        // });\r\n        // this.influence.top5sys = this.influence.top5sys.slice(1)\r\n        this.influence.top5sys = resp.data.top5sys\r\n      })\r\n    },\r\n\r\n    getBloodUrl () {\r\n      if (this.jobinfo.platform !== 'EDW') {\r\n        return\r\n      }\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/getBloodUrl'\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        if (resp.data.bloodurl) {\r\n          this.bloodUrl = resp.data.bloodurl\r\n        }\r\n      })\r\n    },\r\n\r\n    getLifeCycle () {\r\n      let loadConfig = {\r\n        method: 'GET',\r\n        url: '/jobimg/getLifeCycle',\r\n        params: {\r\n          job: this.jobinfo.job\r\n        }\r\n      }\r\n      this.$ajax(loadConfig).then(resp => {\r\n        // console.log(resp)\r\n        this.lifeCycle.createTime = resp.data.create_time\r\n        this.lifeCycle.updateTime = resp.data.update_time\r\n        this.lifeCycle.version = resp.data.version\r\n      })\r\n    },\r\n\r\n    exportLinkData () {\r\n      this.$refs.linktable.exportCsv({\r\n        filename: this.jobinfo.job + '最长链路'\r\n      })\r\n    },\r\n    exportSourceData () {\r\n      this.$refs.sourcetable.exportCsv({\r\n        filename: this.jobinfo.job + '源系统供数时间'\r\n      })\r\n    },\r\n    exportDirDepData () {\r\n      this.$refs.dirdeptable.exportCsv({\r\n        filename: this.jobinfo.job + '依赖作业最晚完成时间TOP10'\r\n      })\r\n    },\r\n    exportDepData () {\r\n      this.$refs.deptable.exportCsv({\r\n        filename: this.jobinfo.job + '上游作业运行耗时TOP10'\r\n      })\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.init()\r\n    this.getLongestLink()\r\n    this.getDireJobtop()\r\n    this.getUpJobtop()\r\n    this.getSourceJob()\r\n    this.getJobLev()\r\n    this.getJobConsume()\r\n    this.getBaseAttr()\r\n    this.getInfluence()\r\n    // this.getUpJobStat()\r\n    this.getDownJobStat()\r\n    this.getLifeCycle()\r\n  },\r\n  created () {\r\n    // console.log(this.transData.jobData)\r\n    this.jobinfo.job = this.transData.jobData.job\r\n    this.jobinfo.platform = this.transData.jobData.platform\r\n    this.jobinfo.system = this.transData.jobData.system\r\n    this.getBloodUrl()\r\n  }\r\n}\r\n</script>\r\n\r\n<style  scoped>\r\n.rightmenu {\r\n  margin: 0 auto;\r\n  padding: 0px;\r\n  background-image: url(\"~@/assets/jobimg/bj.png\");\r\n}\r\n/* .backtopre {\r\n  float: right;\r\n} */\r\n.btnBabel {\r\n  margin-bottom: 8px;\r\n  margin-right: 8px;\r\n}\r\n.wrapper {\r\n  /*background-color: #F5F5F5;*/\r\n  width: 96%;\r\n}\r\n.container {\r\n  width: 96%;\r\n  margin: 0px auto;\r\n}\r\n.float-e-margins {\r\n  width: 32%;\r\n  height: 250px;\r\n  margin-left: 1%;\r\n  background-color: rgba(\r\n    250,\r\n    250,\r\n    250,\r\n    0.5\r\n  ); /*background-image: linear-gradient(#F5F5F5,#D2D2D2);*/\r\n  box-shadow: 0px 0px 20px 0px #d5dee7;\r\n  border-radius: 20px;\r\n  /* height: 300px; background:url('../../img/background11.png')  */\r\n}\r\n.title {\r\n  font-family: Microsoft YaHei;\r\n  font-size: 20px;\r\n  color: #2d343a;\r\n  padding-left: 20px;\r\n  font-weight: bold;\r\n}\r\n.modal-body {\r\n  padding: 0px;\r\n  background: url(\"~@/assets/jobimg/bj.png\");\r\n}\r\n.imagestyle {\r\n  margin-bottom: 3px;\r\n  margin-right: 5px;\r\n}\r\n.row {\r\n  width: 100%;\r\n  /* margin: 0px auto; */\r\n  margin-right: 0px;\r\n  margin-left: 5px;\r\n  margin-top: 20px;\r\n  margin-bottom: 10px;\r\n}\r\n#base {\r\n  padding-top: 10px;\r\n  padding-left: 20px; /*height:210px*/\r\n}\r\n#influ {\r\n  padding-top: 10px;\r\n  padding-left: 20px; /*height:210px*/\r\n}\r\n#life {\r\n  padding-top: 10px;\r\n  padding-left: 20px; /*height:210px*/\r\n}\r\n#maind {\r\n  width: 750px; /*margin: 0 auto;*/\r\n  height: 410px; /*overflow: hidden;*/\r\n}\r\n\r\n#main {\r\n  width: 420px;\r\n  margin: 0px auto;\r\n  height: 467px;\r\n  overflow: hidden;\r\n}\r\n#energyMap {\r\n  width: 750px; /*margin: 0 auto;*/\r\n  height: 330px;\r\n  margin-top: 20px;\r\n  overflow: hidden;\r\n}\r\n#btnLink {\r\n  margin-bottom: 5px;\r\n  margin-right: 5px;\r\n  height: 34px;\r\n  background-color: #2780e3;\r\n  border-color: #2780e3;\r\n}\r\n.titlestyle {\r\n  width: 90%;\r\n  margin: 0px auto; /*background: #FFFFFF;*/\r\n  border-radius: 20px;\r\n}\r\n.resource {\r\n  min-height: 350px;\r\n  float: left;\r\n  width: 58%;\r\n  height: 455px;\r\n  background-color: rgba(250, 250, 250, 0.5);\r\n  box-shadow: 0px 0px 20px 0px rgba(18, 42, 99, 0.2);\r\n  border-radius: 20px; /*background-image: linear-gradient(#F5F5F5,#D2D2D2);*/ /*background:url('../../img/background22.png')*/\r\n}\r\n.h5style {\r\n  font-family: Microsoft YaHei;\r\n  font-size: 20px;\r\n  color: #2d343a;\r\n  letter-spacing: 0;\r\n  line-height: 22px;\r\n  padding-top: 20px; /*padding-left: 7%;*/\r\n  font-weight: bold;\r\n}\r\n#TimeLevel {\r\n  width: 520px;\r\n  margin: 0 auto;\r\n  height: 250px;\r\n  overflow: hidden;\r\n}\r\n.resourceinner {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 300px;\r\n  padding: 0px;\r\n  margin-top: 60px;\r\n  border-width: 0px;\r\n  cursor: default;\r\n}\r\n#JobRate {\r\n  width: 520px;\r\n  margin: 0 auto;\r\n  height: 600px;\r\n  overflow: hidden;\r\n}\r\n.jobscore {\r\n  min-height: 350px;\r\n  float: left;\r\n  width: 40%;\r\n  height: 570px;\r\n  background-color: rgba(250, 250, 250, 0.5);\r\n  box-shadow: 0px 0px 20px 0px rgba(18, 42, 99, 0.3);\r\n  border-radius: 20px;\r\n  margin-right: 20px; /*background-image: linear-gradient(#F5F5F5,#D2D2D2);*/ /*background:url('../../img/background21.png')*/\r\n}\r\n.lineage {\r\n  min-height: 350px;\r\n  float: left;\r\n  width: 58%;\r\n  height: 570px;\r\n  background-color: rgba(250, 250, 250, 0.5);\r\n  box-shadow: 0px 0px 20px 0px rgba(18, 42, 99, 0.3);\r\n  border-radius: 20px; /*background-image: linear-gradient(#F5F5F5,#D2D2D2);*/ /*background:url('../../img/background22.png')*/\r\n}\r\n.performance {\r\n  min-height: 350px;\r\n  float: left;\r\n  width: 40%;\r\n  height: 455px;\r\n  background-color: rgba(250, 250, 250, 0.5);\r\n  box-shadow: 0px 0px 20px 0px rgba(18, 42, 99, 0.3);\r\n  border-radius: 20px;\r\n  margin-right: 20px; /*background-image: linear-gradient(#F5F5F5,#D2D2D2);*/ /*background:url('@/assets/jobimg/background21.png')*/\r\n}\r\n.analysis {\r\n  margin: 0 auto;\r\n  overflow: hidden;\r\n  margin-top: 5px;\r\n  margin-left: 50px;\r\n  text-align: center;\r\n}\r\n.btnstyle {\r\n  /* margin: 0 auto;\r\n  overflow: hidden;\r\n  margin-top: 5px;\r\n  margin-left: 50px;\r\n  text-align: center; */\r\n\r\n  margin: 0 auto;\r\n  overflow: hidden;\r\n  margin-top: 5px;\r\n  text-align: center;\r\n}\r\n\r\n.tableTitle{\r\n  margin-left: 280px;\r\n  font-size: 18px;\r\n}\r\n.imgTitle{\r\n  margin-top: 5px;\r\n  margin-left: 25%;\r\n  padding-top:5px;\r\n  height: 35px;\r\n  font-size: 25px;\r\n  font-weight: bold;\r\n  background-color: transparent\r\n}\r\n.tagstyle {\r\n  background-color: transparent ;\r\n  font-size: 14px;\r\n  margin-left: 0.5em;\r\n}\r\n</style>\r\n"]}]}