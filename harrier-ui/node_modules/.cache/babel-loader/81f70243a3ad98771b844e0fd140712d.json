{"remainingRequest":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\components\\cropper\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\components\\cropper\\index.vue","mtime":1681468306446},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\.babelrc","mtime":1681468306354},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\nimport Cropper from 'cropperjs';\nimport \"./index.less\";\nimport 'cropperjs/dist/cropper.min.css';\nexport default {\n  name: 'Cropper',\n  props: {\n    src: {\n      type: String,\n      default: ''\n    },\n    preview: {\n      type: Boolean,\n      default: true\n    },\n    moveStep: {\n      type: Number,\n      default: 4\n    },\n    cropButtonText: {\n      type: String,\n      default: '裁剪'\n    }\n  },\n  data: function data() {\n    return {\n      cropper: null,\n      insideSrc: ''\n    };\n  },\n  computed: {\n    imgId: function imgId() {\n      return \"cropper\".concat(this._uid);\n    },\n    previewId: function previewId() {\n      return \"cropper_preview\".concat(this._uid);\n    }\n  },\n  watch: {\n    src: function src(_src) {\n      this.replace(_src);\n    },\n    insideSrc: function insideSrc(src) {\n      this.replace(src);\n    }\n  },\n  methods: {\n    beforeUpload: function beforeUpload(file) {\n      var _this = this;\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = function (event) {\n        _this.insideSrc = event.srcElement.result;\n      };\n      return false;\n    },\n    replace: function replace(src) {\n      this.cropper.replace(src);\n      this.insideSrc = src;\n    },\n    rotate: function rotate() {\n      this.cropper.rotate(90);\n    },\n    shrink: function shrink() {\n      this.cropper.zoom(-0.1);\n    },\n    magnify: function magnify() {\n      this.cropper.zoom(0.1);\n    },\n    scale: function scale(d) {\n      this.cropper[\"scale\".concat(d)](-this.cropper.getData()[\"scale\".concat(d)]);\n    },\n    move: function move() {\n      var _this$cropper;\n      (_this$cropper = this.cropper).move.apply(_this$cropper, arguments);\n    },\n    crop: function crop() {\n      var _this2 = this;\n      this.cropper.getCroppedCanvas().toBlob(function (blob) {\n        _this2.$emit('on-crop', blob);\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n    this.$nextTick(function () {\n      var dom = document.getElementById(_this3.imgId);\n      _this3.cropper = new Cropper(dom, {\n        preview: \"#\".concat(_this3.previewId),\n        checkCrossOrigin: true\n      });\n    });\n  }\n};",{"version":3,"names":["Cropper","name","props","src","type","String","default","preview","Boolean","moveStep","Number","cropButtonText","data","cropper","insideSrc","computed","imgId","concat","_uid","previewId","watch","replace","methods","beforeUpload","file","_this","reader","FileReader","readAsDataURL","onload","event","srcElement","result","rotate","shrink","zoom","magnify","scale","d","getData","move","_this$cropper","apply","arguments","crop","_this2","getCroppedCanvas","toBlob","blob","$emit","mounted","_this3","$nextTick","dom","document","getElementById","checkCrossOrigin"],"sources":["src/components/cropper/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"cropper-wrapper\">\r\n    <div class=\"img-box\">\r\n      <img class=\"cropper-image\" :id=\"imgId\" alt=\"\">\r\n    </div>\r\n    <div class=\"right-con\">\r\n      <div v-if=\"preview\" class=\"preview-box\" :id=\"previewId\"></div>\r\n      <div class=\"button-box\">\r\n        <slot>\r\n          <Upload action=\"image/upload\" :before-upload=\"beforeUpload\">\r\n            <Button style=\"width: 150px;\" type=\"primary\">上传图片</Button>\r\n          </Upload>\r\n        </slot>\r\n        <div v-show=\"insideSrc\">\r\n          <Button type=\"primary\" @click=\"rotate\">\r\n            <Icon type=\"md-refresh\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"shrink\">\r\n            <Icon type=\"md-remove\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"magnify\">\r\n            <Icon type=\"md-add\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"scale('X')\">\r\n            <Icon custom=\"iconfont icon-shuipingfanzhuan\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"scale('Y')\">\r\n            <Icon custom=\"iconfont icon-chuizhifanzhuan\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"move(0, -moveStep)\">\r\n            <Icon type=\"md-arrow-round-up\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"move(-moveStep, 0)\">\r\n            <Icon type=\"md-arrow-round-back\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"move(0, moveStep)\">\r\n            <Icon type=\"md-arrow-round-down\" :size=\"18\"/>\r\n          </Button>\r\n          <Button type=\"primary\" @click=\"move(moveStep, 0)\">\r\n            <Icon type=\"md-arrow-round-forward\" :size=\"18\"/>\r\n          </Button>\r\n          <Button style=\"width: 150px;margin-top: 10px;\" type=\"primary\" @click=\"crop\">{{ cropButtonText }}</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cropper from 'cropperjs'\r\nimport './index.less'\r\nimport 'cropperjs/dist/cropper.min.css'\r\nexport default {\r\n  name: 'Cropper',\r\n  props: {\r\n    src: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    preview: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    moveStep: {\r\n      type: Number,\r\n      default: 4\r\n    },\r\n    cropButtonText: {\r\n      type: String,\r\n      default: '裁剪'\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      cropper: null,\r\n      insideSrc: ''\r\n    }\r\n  },\r\n  computed: {\r\n    imgId () {\r\n      return `cropper${this._uid}`\r\n    },\r\n    previewId () {\r\n      return `cropper_preview${this._uid}`\r\n    }\r\n  },\r\n  watch: {\r\n    src (src) {\r\n      this.replace(src)\r\n    },\r\n    insideSrc (src) {\r\n      this.replace(src)\r\n    }\r\n  },\r\n  methods: {\r\n    beforeUpload (file) {\r\n      const reader = new FileReader()\r\n      reader.readAsDataURL(file)\r\n      reader.onload = (event) => {\r\n        this.insideSrc = event.srcElement.result\r\n      }\r\n      return false\r\n    },\r\n    replace (src) {\r\n      this.cropper.replace(src)\r\n      this.insideSrc = src\r\n    },\r\n    rotate () {\r\n      this.cropper.rotate(90)\r\n    },\r\n    shrink () {\r\n      this.cropper.zoom(-0.1)\r\n    },\r\n    magnify () {\r\n      this.cropper.zoom(0.1)\r\n    },\r\n    scale (d) {\r\n      this.cropper[`scale${d}`](-this.cropper.getData()[`scale${d}`])\r\n    },\r\n    move (...argu) {\r\n      this.cropper.move(...argu)\r\n    },\r\n    crop () {\r\n      this.cropper.getCroppedCanvas().toBlob(blob => {\r\n        this.$emit('on-crop', blob)\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.$nextTick(() => {\r\n      let dom = document.getElementById(this.imgId)\r\n      this.cropper = new Cropper(dom, {\r\n        preview: `#${this.previewId}`,\r\n        checkCrossOrigin: true\r\n      })\r\n    })\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;AAiDA,OAAAA,OAAA;AACA;AACA;AACA;EACAC,IAAA;EACAC,KAAA;IACAC,GAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAC,OAAA;MACAH,IAAA,EAAAI,OAAA;MACAF,OAAA;IACA;IACAG,QAAA;MACAL,IAAA,EAAAM,MAAA;MACAJ,OAAA;IACA;IACAK,cAAA;MACAP,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EACAM,IAAA,WAAAA,KAAA;IACA;MACAC,OAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACAC,KAAA,WAAAA,MAAA;MACA,iBAAAC,MAAA,MAAAC,IAAA;IACA;IACAC,SAAA,WAAAA,UAAA;MACA,yBAAAF,MAAA,MAAAC,IAAA;IACA;EACA;EACAE,KAAA;IACAjB,GAAA,WAAAA,QAAA;MACA,KAAAkB,OAAA,CAAAlB,IAAA;IACA;IACAW,SAAA,WAAAA,UAAAX,GAAA;MACA,KAAAkB,OAAA,CAAAlB,GAAA;IACA;EACA;EACAmB,OAAA;IACAC,YAAA,WAAAA,aAAAC,IAAA;MAAA,IAAAC,KAAA;MACA,IAAAC,MAAA,OAAAC,UAAA;MACAD,MAAA,CAAAE,aAAA,CAAAJ,IAAA;MACAE,MAAA,CAAAG,MAAA,aAAAC,KAAA;QACAL,KAAA,CAAAX,SAAA,GAAAgB,KAAA,CAAAC,UAAA,CAAAC,MAAA;MACA;MACA;IACA;IACAX,OAAA,WAAAA,QAAAlB,GAAA;MACA,KAAAU,OAAA,CAAAQ,OAAA,CAAAlB,GAAA;MACA,KAAAW,SAAA,GAAAX,GAAA;IACA;IACA8B,MAAA,WAAAA,OAAA;MACA,KAAApB,OAAA,CAAAoB,MAAA;IACA;IACAC,MAAA,WAAAA,OAAA;MACA,KAAArB,OAAA,CAAAsB,IAAA;IACA;IACAC,OAAA,WAAAA,QAAA;MACA,KAAAvB,OAAA,CAAAsB,IAAA;IACA;IACAE,KAAA,WAAAA,MAAAC,CAAA;MACA,KAAAzB,OAAA,SAAAI,MAAA,CAAAqB,CAAA,SAAAzB,OAAA,CAAA0B,OAAA,WAAAtB,MAAA,CAAAqB,CAAA;IACA;IACAE,IAAA,WAAAA,KAAA;MAAA,IAAAC,aAAA;MACA,CAAAA,aAAA,QAAA5B,OAAA,EAAA2B,IAAA,CAAAE,KAAA,CAAAD,aAAA,EAAAE,SAAA;IACA;IACAC,IAAA,WAAAA,KAAA;MAAA,IAAAC,MAAA;MACA,KAAAhC,OAAA,CAAAiC,gBAAA,GAAAC,MAAA,WAAAC,IAAA;QACAH,MAAA,CAAAI,KAAA,YAAAD,IAAA;MACA;IACA;EACA;EACAE,OAAA,WAAAA,QAAA;IAAA,IAAAC,MAAA;IACA,KAAAC,SAAA;MACA,IAAAC,GAAA,GAAAC,QAAA,CAAAC,cAAA,CAAAJ,MAAA,CAAAnC,KAAA;MACAmC,MAAA,CAAAtC,OAAA,OAAAb,OAAA,CAAAqD,GAAA;QACA9C,OAAA,MAAAU,MAAA,CAAAkC,MAAA,CAAAhC,SAAA;QACAqC,gBAAA;MACA;IACA;EACA;AACA"}]}