{"remainingRequest":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\authority\\menu\\Form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\view\\spdb\\authority\\menu\\Form.vue","mtime":1681468306529},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\.babelrc","mtime":1681468306354},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.regexp.replace\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nexport default {\n  props: {\n    transData: Object\n  },\n  data: function data() {\n    return {\n      formBean: {},\n      loading: false,\n      iconStyles: {\n        width: '20px',\n        height: '20px',\n        margin: '10px',\n        padding: '0px',\n        cursor: 'pointer',\n        verticalAlign: 'middle'\n      },\n      formRule: {\n        menuName: [{\n          required: true,\n          message: '请输入菜单名！'\n        }],\n        menuUrl: [{\n          required: false,\n          message: '非根菜单请输入菜单URL！'\n        }],\n        menuNo: [{\n          required: true,\n          message: '请输入菜单排序值！'\n        }]\n      },\n      iconDlgShow: false,\n      currentIcon: '',\n      icons: [],\n      isNoPath: this.transData.isNoPath\n    };\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n      if (this.transData.id) {\n        var getMenu = {\n          method: 'GET',\n          url: \"menu/\".concat(this.transData.id)\n        };\n        this.$ajax(getMenu).then(function (resp) {\n          _this.formBean = resp.data;\n        });\n      }\n      if (this.transData.parentId) {\n        // 子菜单赋值parentid\n        this.formBean.parentMenuId = this.transData.parentId;\n      }\n    },\n    save: function save() {\n      var _this2 = this;\n      this.$refs.menuForm.validate(function (valid) {\n        if (!valid) return;\n        var config = {};\n        var data = Object.assign({}, _this2.formBean);\n        if (data.menuUrl) {\n          data.menuUrl = data.menuUrl.replace(/\\/+/g, '/');\n        }\n        config.data = data;\n        delete config.data.createTime;\n        delete config.data.updateTime;\n        if (_this2.formBean.menuId) {\n          config.method = 'PUT';\n          config.url = \"/menu/\".concat(_this2.formBean.menuId, \"/update\");\n        } else {\n          if (config.data.menuName) {\n            // config.data.createUser = 'test'\n            // config.data.updateUser = 'test'\n            if (!config.data.parentMenuId) {\n              config.data.parentMenuId = 0;\n              config.data.menuFlag = 0;\n            } else {\n              config.data.menuFlag = 1;\n            }\n            config.data.isEnable = true;\n          }\n          config.method = 'POST';\n          config.url = '/menu/add';\n        }\n        _this2.loading = true;\n        _this2.$ajax(config).then(function (resp) {\n          _this2.cancel();\n        });\n      });\n    },\n    cancel: function cancel() {\n      this.$emit('switch');\n    },\n    showIconDlg: function showIconDlg() {\n      this.iconDlgShow = true;\n      var icons = [];\n      var _iterator = _createForOfIteratorHelper(document.styleSheets),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var sheet = _step.value;\n          var rules = void 0;\n          if (sheet.cssRules) {\n            rules = sheet.cssRules;\n          } else {\n            rules = sheet.rules;\n          }\n          var _iterator2 = _createForOfIteratorHelper(rules),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var rule = _step2.value;\n              var cssName = rule.selectorText; // .icon-biaoji::before\n              if (cssName && cssName.startsWith('.icon-')) {\n                // console.log(cssName)\n                // const icon = cssName.replace('.icon', 'spdb').replace('::before', '')\n                var icon = cssName.replace('.icon', 'iconfont icon').replace('::before', '');\n                // console.log(icon)\n                icons.push({\n                  value: icon,\n                  label: icon\n                });\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      this.icons = icons;\n    },\n    selectIcon: function selectIcon(e) {\n      if (e.target.nodeName === 'I') {\n        this.currentIcon = e.target.className.replace('iconfont icon', 'spdb');\n        this.formBean.menuIconUrl = this.currentIcon;\n        this.$refs.iconDlgShow.close();\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  }\n};",{"version":3,"names":["props","transData","Object","data","formBean","loading","iconStyles","width","height","margin","padding","cursor","verticalAlign","formRule","menuName","required","message","menuUrl","menuNo","iconDlgShow","currentIcon","icons","isNoPath","methods","init","_this","id","getMenu","method","url","concat","$ajax","then","resp","parentId","parentMenuId","save","_this2","$refs","menuForm","validate","valid","config","assign","replace","createTime","updateTime","menuId","menuFlag","isEnable","cancel","$emit","showIconDlg","_iterator","_createForOfIteratorHelper","document","styleSheets","_step","s","n","done","sheet","value","rules","cssRules","_iterator2","_step2","rule","cssName","selectorText","startsWith","icon","push","label","err","e","f","selectIcon","target","nodeName","className","menuIconUrl","close","mounted"],"sources":["src/view/spdb/authority/menu/Form.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <Form ref=\"menuForm\" :label-width=\"100\" :model=\"formBean\" :rules=\"formRule\">\r\n      <Row>\r\n        <Col span=\"10\">\r\n          <FormItem prop=\"menuName\" label=\"菜单名\">\r\n            <Input v-model=\"formBean.menuName\"/>\r\n          </FormItem>\r\n        </Col>\r\n        <Col span=\"10\">\r\n          <FormItem prop=\"menuUrl\" label=\"菜单URL\">\r\n            <Input :disabled=\"isNoPath\" v-model=\"formBean.menuUrl\"/>\r\n          </FormItem>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col span=\"10\">\r\n          <FormItem label=\"菜单描述\">\r\n            <Input v-model=\"formBean.remark\"/>\r\n          </FormItem>\r\n        </Col>\r\n        <Col span=\"10\">\r\n          <FormItem prop=\"menuNo\" label=\"菜单排序值\">\r\n            <Input v-model=\"formBean.menuNo\"/>\r\n          </FormItem>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col span=\"10\">\r\n          <FormItem label=\"菜单图标\">\r\n            <Icon :style=\"iconStyles\" size=\"20\" :type=\"formBean.menuIconUrl\"></Icon>\r\n            <Button type=\"success\" @click=\"showIconDlg()\">选择</Button>\r\n          </FormItem>\r\n        </Col>\r\n      </Row>\r\n    </Form>\r\n\r\n    <div>\r\n      <Button type=\"primary\" :loading=\"loading\" icon=\"md-add\" @click=\"save()\">保存</Button>\r\n      <Button type=\"primary\" icon=\"ios-redo-outline\" @click=\"cancel()\">取消</Button>\r\n    </div>\r\n\r\n    <Modal\r\n    v-model=\"iconDlgShow\"\r\n    ref=\"iconDlgShow\"\r\n    width=\"700\"\r\n    :footerHide=\"true\"\r\n    title=\"选择图标\">\r\n      <div @click=\"selectIcon\" style=\"text-align:center\">\r\n        <Icon :style=\"iconStyles\" size=\"24\" v-for=\"icon in icons\" :class=\"icon.value\" :key=\"icon.value\" :type=\"icon.value\"></Icon>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    transData: Object\r\n  },\r\n  data: function () {\r\n    return {\r\n      formBean: {},\r\n      loading: false,\r\n      iconStyles: {\r\n        width: '20px',\r\n        height: '20px',\r\n        margin: '10px',\r\n        padding: '0px',\r\n        cursor: 'pointer',\r\n        verticalAlign: 'middle'\r\n      },\r\n      formRule: {\r\n        menuName: [\r\n          {\r\n            required: true,\r\n            message: '请输入菜单名！'\r\n          }\r\n        ],\r\n        menuUrl: [\r\n          {\r\n            required: false,\r\n            message: '非根菜单请输入菜单URL！'\r\n          }\r\n        ],\r\n        menuNo: [\r\n          {\r\n            required: true,\r\n            message: '请输入菜单排序值！'\r\n          }\r\n        ]\r\n      },\r\n      iconDlgShow: false,\r\n      currentIcon: '',\r\n      icons: [],\r\n      isNoPath: this.transData.isNoPath\r\n    }\r\n  },\r\n  methods: {\r\n    init: function () {\r\n      if (this.transData.id) {\r\n        const getMenu = {\r\n          method: 'GET',\r\n          url: `menu/${this.transData.id}`\r\n        }\r\n        this.$ajax(getMenu)\r\n          .then(resp => {\r\n            this.formBean = resp.data\r\n          })\r\n      }\r\n      if (this.transData.parentId) { // 子菜单赋值parentid\r\n        this.formBean.parentMenuId = this.transData.parentId\r\n      }\r\n    },\r\n    save: function () {\r\n      this.$refs.menuForm.validate(valid => {\r\n        if (!valid) return\r\n        let config = {}\r\n        let data = Object.assign({}, this.formBean)\r\n        if (data.menuUrl) {\r\n          data.menuUrl = data.menuUrl.replace(/\\/+/g, '/')\r\n        }\r\n        config.data = data\r\n        delete config.data.createTime\r\n        delete config.data.updateTime\r\n        if (this.formBean.menuId) {\r\n          config.method = 'PUT'\r\n          config.url = `/menu/${this.formBean.menuId}/update`\r\n        } else {\r\n          if (config.data.menuName) {\r\n            // config.data.createUser = 'test'\r\n            // config.data.updateUser = 'test'\r\n            if (!config.data.parentMenuId) {\r\n              config.data.parentMenuId = 0\r\n              config.data.menuFlag = 0\r\n            } else {\r\n              config.data.menuFlag = 1\r\n            }\r\n            config.data.isEnable = true\r\n          }\r\n          config.method = 'POST'\r\n          config.url = '/menu/add'\r\n        }\r\n        this.loading = true\r\n        this.$ajax(config)\r\n          .then(resp => {\r\n            this.cancel()\r\n          })\r\n      })\r\n    },\r\n    cancel: function () {\r\n      this.$emit('switch')\r\n    },\r\n    showIconDlg: function () {\r\n      this.iconDlgShow = true\r\n      let icons = []\r\n      for (const sheet of document.styleSheets) {\r\n        let rules\r\n        if (sheet.cssRules) {\r\n          rules = sheet.cssRules\r\n        } else {\r\n          rules = sheet.rules\r\n        }\r\n        for (const rule of rules) {\r\n          const cssName = rule.selectorText // .icon-biaoji::before\r\n          if (cssName && cssName.startsWith('.icon-')) {\r\n            // console.log(cssName)\r\n            // const icon = cssName.replace('.icon', 'spdb').replace('::before', '')\r\n            const icon = cssName.replace('.icon', 'iconfont icon').replace('::before', '')\r\n            // console.log(icon)\r\n            icons.push({ value: icon, label: icon })\r\n          }\r\n        }\r\n      }\r\n      this.icons = icons\r\n    },\r\n    selectIcon: function (e) {\r\n      if (e.target.nodeName === 'I') {\r\n        this.currentIcon = e.target.className.replace('iconfont icon', 'spdb')\r\n        this.formBean.menuIconUrl = this.currentIcon\r\n        this.$refs.iconDlgShow.close()\r\n      }\r\n    }\r\n  },\r\n  mounted: function () {\r\n    this.init()\r\n  }\r\n}\r\n</script>\r\n<style>\r\n/* .ivu-modal-body\r\n{\r\n    width:700px;\r\n    height:auto;\r\n    word-wrap: break-word;\r\n    padding: 16px;\r\n    font-size: 10px;\r\n    line-height: 1.5;\r\n} */\r\n</style>\r\n"],"mappings":"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"}]}