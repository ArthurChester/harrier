{"remainingRequest":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\store\\module\\app.js","dependencies":[{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\store\\module\\app.js","mtime":1681468306496},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\.babelrc","mtime":1681468306354},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"D:/WorkSpace/IdeaProjects/harrier/harrier-ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.function.name\";\nimport _toConsumableArray from \"D:/WorkSpace/IdeaProjects/harrier/harrier-ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { getBreadCrumbList, setTagNavListInLocalstorage, getMenuByRouter, getTagNavListFromLocalstorage, getHomeRoute, getNextRoute, routeHasExist, routeEqual, getRouteTitleHandled, localSave, localRead } from '@/libs/util';\nimport { saveErrorLogger } from '@/api/data';\nimport router, { createRouter } from '@/router';\nimport { loadMenu } from '@/libs/router-util';\nimport routers from '@/router/routers';\nimport config from '@/config';\nvar homeName = config.homeName;\nvar closePage = function closePage(state, route) {\n  var nextRoute = getNextRoute(state.tagNavList, route);\n  state.tagNavList = state.tagNavList.filter(function (item) {\n    return !routeEqual(item, route);\n  });\n  router.push(nextRoute);\n};\nexport default {\n  state: {\n    breadCrumbList: [],\n    tagNavList: [],\n    homeRoute: {},\n    local: localRead('local'),\n    errorList: [],\n    hasReadErrorPage: false,\n    menues: []\n  },\n  getters: {\n    menues: function menues(state) {\n      return state.menues;\n    },\n    menuList: function menuList(state, getters, rootState) {\n      return getMenuByRouter(loadMenu(), state.menues, rootState.user.access);\n    },\n    // menuList: (state, getters, rootState) => getMenuByRouter(routers, rootState.user.access),\n    // 通过路由列表得到菜单列表\n    // menuList: (state, getters, rootState) => getMenuByRouter(loadMenu(), rootState.user.access),\n    errorCount: function errorCount(state) {\n      return state.errorList.length;\n    }\n  },\n  mutations: {\n    setBreadCrumb: function setBreadCrumb(state, route) {\n      state.breadCrumbList = getBreadCrumbList(route, state.homeRoute);\n    },\n    setHomeRoute: function setHomeRoute(state, routes) {\n      state.homeRoute = getHomeRoute(routes, homeName);\n    },\n    setTagNavList: function setTagNavList(state, list) {\n      var tagList = [];\n      if (list) {\n        tagList = _toConsumableArray(list);\n      } else tagList = getTagNavListFromLocalstorage() || [];\n      if (tagList[0] && tagList[0].name !== homeName) tagList.shift();\n      var homeTagIndex = tagList.findIndex(function (item) {\n        return item.name === homeName;\n      });\n      if (homeTagIndex > 0) {\n        var homeTag = tagList.splice(homeTagIndex, 1)[0];\n        tagList.unshift(homeTag);\n      }\n      state.tagNavList = tagList;\n      setTagNavListInLocalstorage(_toConsumableArray(tagList));\n    },\n    closeTag: function closeTag(state, route) {\n      var tag = state.tagNavList.filter(function (item) {\n        return routeEqual(item, route);\n      });\n      route = tag[0] ? tag[0] : null;\n      if (!route) return;\n      closePage(state, route);\n    },\n    addTag: function addTag(state, _ref) {\n      var route = _ref.route,\n        _ref$type = _ref.type,\n        type = _ref$type === void 0 ? 'unshift' : _ref$type;\n      var router = getRouteTitleHandled(route);\n      if (!routeHasExist(state.tagNavList, router)) {\n        if (type === 'push') state.tagNavList.push(router);else {\n          if (router.name === homeName) state.tagNavList.unshift(router);else state.tagNavList.splice(1, 0, router);\n        }\n        setTagNavListInLocalstorage(_toConsumableArray(state.tagNavList));\n      }\n    },\n    setLocal: function setLocal(state, lang) {\n      localSave('local', lang);\n      state.local = lang;\n    },\n    addError: function addError(state, error) {\n      state.errorList.push(error);\n    },\n    setHasReadErrorLoggerStatus: function setHasReadErrorLoggerStatus(state) {\n      var status = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      state.hasReadErrorPage = status;\n    },\n    updateMenuList: function updateMenuList(state, routes) {\n      router.matcher = createRouter(routers).matcher;\n      router.addRoutes(routes);\n      state.menues = routes;\n    } // 接受前台数组，刷新菜单\n    // updateMenuList (state, routes) {\n    //   router.addRoutes(routes)\n    //   state.menuList = routes\n    // }\n  },\n  actions: {\n    addErrorLog: function addErrorLog(_ref2, info) {\n      var commit = _ref2.commit,\n        rootState = _ref2.rootState;\n      if (!window.location.href.includes('error_logger_page')) commit('setHasReadErrorLoggerStatus', false);\n      var _rootState$user = rootState.user,\n        token = _rootState$user.token,\n        userId = _rootState$user.userId,\n        userName = _rootState$user.userName;\n      var data = _objectSpread(_objectSpread({}, info), {}, {\n        time: Date.parse(new Date()),\n        token: token,\n        userId: userId,\n        userName: userName\n      });\n      saveErrorLogger(info).then(function () {\n        commit('addError', data);\n      });\n    }\n  }\n};",{"version":3,"names":["getBreadCrumbList","setTagNavListInLocalstorage","getMenuByRouter","getTagNavListFromLocalstorage","getHomeRoute","getNextRoute","routeHasExist","routeEqual","getRouteTitleHandled","localSave","localRead","saveErrorLogger","router","createRouter","loadMenu","routers","config","homeName","closePage","state","route","nextRoute","tagNavList","filter","item","push","breadCrumbList","homeRoute","local","errorList","hasReadErrorPage","menues","getters","menuList","rootState","user","access","errorCount","length","mutations","setBreadCrumb","setHomeRoute","routes","setTagNavList","list","tagList","_toConsumableArray","name","shift","homeTagIndex","findIndex","homeTag","splice","unshift","closeTag","tag","addTag","_ref","_ref$type","type","setLocal","lang","addError","error","setHasReadErrorLoggerStatus","status","arguments","undefined","updateMenuList","matcher","addRoutes","actions","addErrorLog","_ref2","info","commit","window","location","href","includes","_rootState$user","token","userId","userName","data","_objectSpread","time","Date","parse","then"],"sources":["D:/WorkSpace/IdeaProjects/harrier/harrier-ui/src/store/module/app.js"],"sourcesContent":["import {\r\n  getBreadCrumbList,\r\n  setTagNavListInLocalstorage,\r\n  getMenuByRouter,\r\n  getTagNavListFromLocalstorage,\r\n  getHomeRoute,\r\n  getNextRoute,\r\n  routeHasExist,\r\n  routeEqual,\r\n  getRouteTitleHandled,\r\n  localSave,\r\n  localRead\r\n} from '@/libs/util'\r\nimport { saveErrorLogger } from '@/api/data'\r\nimport router, { createRouter } from '@/router'\r\nimport { loadMenu } from '@/libs/router-util'\r\nimport routers from '@/router/routers'\r\nimport config from '@/config'\r\nconst { homeName } = config\r\n\r\nconst closePage = (state, route) => {\r\n  const nextRoute = getNextRoute(state.tagNavList, route)\r\n  state.tagNavList = state.tagNavList.filter(item => {\r\n    return !routeEqual(item, route)\r\n  })\r\n  router.push(nextRoute)\r\n}\r\n\r\nexport default {\r\n  state: {\r\n    breadCrumbList: [],\r\n    tagNavList: [],\r\n    homeRoute: {},\r\n    local: localRead('local'),\r\n    errorList: [],\r\n    hasReadErrorPage: false,\r\n    menues: []\r\n  },\r\n  getters: {\r\n    menues: state => state.menues,\r\n    menuList: (state, getters, rootState) => getMenuByRouter(loadMenu(), state.menues, rootState.user.access),\r\n    // menuList: (state, getters, rootState) => getMenuByRouter(routers, rootState.user.access),\r\n    // 通过路由列表得到菜单列表\r\n    // menuList: (state, getters, rootState) => getMenuByRouter(loadMenu(), rootState.user.access),\r\n    errorCount: state => state.errorList.length\r\n  },\r\n  mutations: {\r\n    setBreadCrumb (state, route) {\r\n      state.breadCrumbList = getBreadCrumbList(route, state.homeRoute)\r\n    },\r\n    setHomeRoute (state, routes) {\r\n      state.homeRoute = getHomeRoute(routes, homeName)\r\n    },\r\n    setTagNavList (state, list) {\r\n      let tagList = []\r\n      if (list) {\r\n        tagList = [...list]\r\n      } else tagList = getTagNavListFromLocalstorage() || []\r\n      if (tagList[0] && tagList[0].name !== homeName) tagList.shift()\r\n      let homeTagIndex = tagList.findIndex(item => item.name === homeName)\r\n      if (homeTagIndex > 0) {\r\n        let homeTag = tagList.splice(homeTagIndex, 1)[0]\r\n        tagList.unshift(homeTag)\r\n      }\r\n      state.tagNavList = tagList\r\n      setTagNavListInLocalstorage([...tagList])\r\n    },\r\n    closeTag (state, route) {\r\n      let tag = state.tagNavList.filter(item => routeEqual(item, route))\r\n      route = tag[0] ? tag[0] : null\r\n      if (!route) return\r\n      closePage(state, route)\r\n    },\r\n    addTag (state, { route, type = 'unshift' }) {\r\n      let router = getRouteTitleHandled(route)\r\n      if (!routeHasExist(state.tagNavList, router)) {\r\n        if (type === 'push') state.tagNavList.push(router)\r\n        else {\r\n          if (router.name === homeName) state.tagNavList.unshift(router)\r\n          else state.tagNavList.splice(1, 0, router)\r\n        }\r\n        setTagNavListInLocalstorage([...state.tagNavList])\r\n      }\r\n    },\r\n    setLocal (state, lang) {\r\n      localSave('local', lang)\r\n      state.local = lang\r\n    },\r\n    addError (state, error) {\r\n      state.errorList.push(error)\r\n    },\r\n    setHasReadErrorLoggerStatus (state, status = true) {\r\n      state.hasReadErrorPage = status\r\n    },\r\n    updateMenuList (state, routes) {\r\n      router.matcher = createRouter(routers).matcher\r\n      router.addRoutes(routes)\r\n      state.menues = routes\r\n    }\r\n    // 接受前台数组，刷新菜单\r\n    // updateMenuList (state, routes) {\r\n    //   router.addRoutes(routes)\r\n    //   state.menuList = routes\r\n    // }\r\n  },\r\n  actions: {\r\n    addErrorLog ({ commit, rootState }, info) {\r\n      if (!window.location.href.includes('error_logger_page')) commit('setHasReadErrorLoggerStatus', false)\r\n      const { user: { token, userId, userName } } = rootState\r\n      let data = {\r\n        ...info,\r\n        time: Date.parse(new Date()),\r\n        token,\r\n        userId,\r\n        userName\r\n      }\r\n      saveErrorLogger(info).then(() => {\r\n        commit('addError', data)\r\n      })\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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"}]}