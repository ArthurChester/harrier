{"remainingRequest":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\components\\s-auth-button\\authUtil.js","dependencies":[{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\src\\components\\s-auth-button\\authUtil.js","mtime":1681468306475},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\.babelrc","mtime":1681468306354},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\IdeaProjects\\harrier\\harrier-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.find-index\";\n//校验权限工具类\nvar authUtil = {\n  keys: [],\n  fetchAuthUrl: function fetchAuthUrl(axios) {\n    var _this = this;\n    var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"/resource/meta\";\n    var ajaxConfig = {\n      url: url,\n      method: \"GET\"\n    };\n    return axios(ajaxConfig).then(function (response) {\n      if (response.data) _this.keys = response.data;\n    }).catch(function (error) {\n      console.info(error);\n      console.log(\"请求权限异常，请打开控制台查看请求的异常信息！\");\n    });\n  },\n  checkUrl: function checkUrl(requestConfig, keys) {\n    return keys.findIndex(function (value, index, arr) {\n      var auth = value.trim().split(\":\");\n      //  console.log(auth);\n      //  console.log(requestConfig);\n      //  debugger         \n      var patt1 = new RegExp(auth[0].replace(\"/.*\", \"*\")); //url pattern\n      if (auth[1] == \"*\") {\n        return patt1.test(requestConfig.url);\n      } else {\n        var patt2 = new RegExp(auth[1]); //url pattern\n        return patt1.test(requestConfig.url) && patt2.test(requestConfig.method.toUpperCase());\n      }\n    }) != -1 ? true : false;\n  }\n};\nexport default authUtil;",{"version":3,"names":["authUtil","keys","fetchAuthUrl","axios","_this","url","arguments","length","undefined","ajaxConfig","method","then","response","data","catch","error","console","info","log","checkUrl","requestConfig","findIndex","value","index","arr","auth","trim","split","patt1","RegExp","replace","test","patt2","toUpperCase"],"sources":["D:/WorkSpace/IdeaProjects/harrier/harrier-ui/src/components/s-auth-button/authUtil.js"],"sourcesContent":["//校验权限工具类\r\nconst authUtil = {\r\n  keys:[],\r\n  fetchAuthUrl(axios, url = \"/resource/meta\") {\r\n    let ajaxConfig = {\r\n      url: url,\r\n      method: \"GET\"\r\n    };\r\n    return axios(ajaxConfig)\r\n      .then(response => {\r\n        if(response.data) this.keys = response.data;      \r\n      })\r\n      .catch(error => {\r\n        console.info(error)\r\n        console.log(\"请求权限异常，请打开控制台查看请求的异常信息！\");\r\n      });\r\n  },\r\n  checkUrl(requestConfig,keys) {\r\n    return keys.findIndex(function(value, index, arr) {\r\n      let auth = value.trim().split(\":\");\r\n        //  console.log(auth);\r\n        //  console.log(requestConfig);\r\n        //  debugger         \r\n      let patt1 = new RegExp(auth[0].replace(\"/.*\",\"*\")); //url pattern\r\n      if (auth[1] == \"*\") {\r\n        return patt1.test(requestConfig.url);\r\n      } else {\r\n        let patt2 = new RegExp(auth[1]); //url pattern\r\n        return (\r\n          patt1.test(requestConfig.url) &&\r\n          patt2.test(requestConfig.method.toUpperCase())\r\n        );\r\n      }\r\n    }) != -1\r\n      ? true\r\n      : false;\r\n  }\r\n};\r\n\r\nexport default authUtil;\r\n"],"mappings":";;;;AAAA;AACA,IAAMA,QAAQ,GAAG;EACfC,IAAI,EAAC,EAAE;EACPC,YAAY,WAAAA,aAACC,KAAK,EAA0B;IAAA,IAAAC,KAAA;IAAA,IAAxBC,GAAG,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,gBAAgB;IACxC,IAAIG,UAAU,GAAG;MACfJ,GAAG,EAAEA,GAAG;MACRK,MAAM,EAAE;IACV,CAAC;IACD,OAAOP,KAAK,CAACM,UAAU,CAAC,CACrBE,IAAI,CAAC,UAAAC,QAAQ,EAAI;MAChB,IAAGA,QAAQ,CAACC,IAAI,EAAET,KAAI,CAACH,IAAI,GAAGW,QAAQ,CAACC,IAAI;IAC7C,CAAC,CAAC,CACDC,KAAK,CAAC,UAAAC,KAAK,EAAI;MACdC,OAAO,CAACC,IAAI,CAACF,KAAK,CAAC;MACnBC,OAAO,CAACE,GAAG,CAAC,yBAAyB,CAAC;IACxC,CAAC,CAAC;EACN,CAAC;EACDC,QAAQ,WAAAA,SAACC,aAAa,EAACnB,IAAI,EAAE;IAC3B,OAAOA,IAAI,CAACoB,SAAS,CAAC,UAASC,KAAK,EAAEC,KAAK,EAAEC,GAAG,EAAE;MAChD,IAAIC,IAAI,GAAGH,KAAK,CAACI,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC;MAChC;MACA;MACA;MACF,IAAIC,KAAK,GAAG,IAAIC,MAAM,CAACJ,IAAI,CAAC,CAAC,CAAC,CAACK,OAAO,CAAC,KAAK,EAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACpD,IAAIL,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE;QAClB,OAAOG,KAAK,CAACG,IAAI,CAACX,aAAa,CAACf,GAAG,CAAC;MACtC,CAAC,MAAM;QACL,IAAI2B,KAAK,GAAG,IAAIH,MAAM,CAACJ,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjC,OACEG,KAAK,CAACG,IAAI,CAACX,aAAa,CAACf,GAAG,CAAC,IAC7B2B,KAAK,CAACD,IAAI,CAACX,aAAa,CAACV,MAAM,CAACuB,WAAW,CAAC,CAAC,CAAC;MAElD;IACF,CAAC,CAAC,IAAI,CAAC,CAAC,GACJ,IAAI,GACJ,KAAK;EACX;AACF,CAAC;AAED,eAAejC,QAAQ"}]}